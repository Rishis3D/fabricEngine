{
  "objectType" : "Graph",
  "metadata" : {
    "camera_mat44" : "{\n  \"row0\" : {\n    \"x\" : 0.8977645635604858,\n    \"y\" : 0.03798290342092514,\n    \"z\" : -0.4487913846969604,\n    \"t\" : -13.83845615386963\n    },\n  \"row1\" : {\n    \"x\" : -1.678160515439231e-06,\n    \"y\" : 0.9962645769119263,\n    \"z\" : 0.0850885733962059,\n    \"t\" : 2.588992118835449\n    },\n  \"row2\" : {\n    \"x\" : 0.4503974616527557,\n    \"y\" : -0.07570656388998032,\n    \"z\" : 0.8945635557174683,\n    \"t\" : 27.67320823669434\n    },\n  \"row3\" : {\n    \"x\" : 0,\n    \"y\" : 0,\n    \"z\" : 0,\n    \"t\" : 1\n    }\n  }",
    "timeline_start" : "1",
    "timeline_loopMode" : "1",
    "uiGraphZoom" : "{\n  \"value\" : 0.4192338883876801\n  }",
    "timeline_simMode" : "0",
    "camera_focalDistance" : "30.97210311889648",
    "timeline_current" : "1",
    "timeline_end" : "50",
    "uiGraphPan" : "{\n  \"x\" : -564.0047302246094,\n  \"y\" : 167.9336547851562\n  }"
    },
  "title" : "",
  "ports" : [
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "instance",
      "execPortType" : "Out",
      "typeSpec" : "InlineInstance"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "extrusionMesh",
      "execPortType" : "Out",
      "typeSpec" : "PolygonMesh"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "drawThis",
      "execPortType" : "Out",
      "typeSpec" : "DrawingHandle"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "centerRodMesh",
      "execPortType" : "Out",
      "typeSpec" : "PolygonMesh"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "instance_2",
      "execPortType" : "Out",
      "typeSpec" : "InlineInstance"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "instance_4",
      "execPortType" : "Out",
      "typeSpec" : "InlineInstance"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "this",
      "execPortType" : "Out",
      "typeSpec" : "DrawingHandle"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "In",
      "name" : "dummy",
      "execPortType" : "Out",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 10)"
        },
      "nodePortType" : "Out",
      "name" : "p1Radius",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 10)"
        },
      "nodePortType" : "Out",
      "name" : "p2Radius",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 64)"
        },
      "nodePortType" : "Out",
      "name" : "p1Num",
      "execPortType" : "In",
      "typeSpec" : "SInt32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 64)"
        },
      "nodePortType" : "Out",
      "name" : "p2Num",
      "execPortType" : "In",
      "typeSpec" : "SInt32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 100)"
        },
      "nodePortType" : "Out",
      "name" : "distance",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 100)"
        },
      "nodePortType" : "Out",
      "name" : "sideNum",
      "execPortType" : "In",
      "typeSpec" : "SInt32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiCombo" : "(\"profile 0\", \"profile 1\", \"profile 2\")"
        },
      "nodePortType" : "Out",
      "name" : "sideProfileType",
      "execPortType" : "In",
      "typeSpec" : "SInt32"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "sideProfile",
      "execPortType" : "In",
      "typeSpec" : "Vec3[]"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "sideProfileCount",
      "execPortType" : "In",
      "typeSpec" : "UInt32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 180)"
        },
      "nodePortType" : "Out",
      "name" : "sideSmoothingAngle",
      "execPortType" : "In",
      "typeSpec" : "Scalar"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 10)"
        },
      "nodePortType" : "Out",
      "name" : "sideProfileTransZ",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 2)"
        },
      "nodePortType" : "Out",
      "name" : "sideProfileScale",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "sideScaleUV",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "sideOffsetU",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "sideOffsetV",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "sideScaleU",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "sideScaleV",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "sideUseChamfer",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 180)"
        },
      "nodePortType" : "Out",
      "name" : "sideChamferMaxAngle",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 5)"
        },
      "nodePortType" : "Out",
      "name" : "sideChamferSize",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 10)"
        },
      "nodePortType" : "Out",
      "name" : "cap1RadiusOffset",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 10)"
        },
      "nodePortType" : "Out",
      "name" : "cap1Zoffset",
      "execPortType" : "In",
      "typeSpec" : "Scalar"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap1ProfileScale",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap1UseChamfer",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 180)"
        },
      "nodePortType" : "Out",
      "name" : "cap1ChamferMaxAngle",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap1ChamferSize",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap1ScaleUV",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 180)"
        },
      "nodePortType" : "Out",
      "name" : "Cap1SmoothinAngle",
      "execPortType" : "In",
      "typeSpec" : "Scalar"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 10)"
        },
      "nodePortType" : "Out",
      "name" : "cap2RadiusOffset",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 10)"
        },
      "nodePortType" : "Out",
      "name" : "cap2Zoffset",
      "execPortType" : "In",
      "typeSpec" : "Scalar"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap2ProfileScale",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap2UseChamfer",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 180)"
        },
      "nodePortType" : "Out",
      "name" : "cap2ChamferMaxAngle",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 5)"
        },
      "nodePortType" : "Out",
      "name" : "cap2ChamferSize",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap2ScaleUV",
      "execPortType" : "In",
      "typeSpec" : "Float32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(0, 180)"
        },
      "nodePortType" : "Out",
      "name" : "Cap2SmoothinAngle",
      "execPortType" : "In",
      "typeSpec" : "Scalar"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "drawXfos",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "doubleSided",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "wireFrame",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "drawCaps",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "drawTexture",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap1Type",
      "execPortType" : "In",
      "typeSpec" : "UInt32"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "cap1Profile",
      "execPortType" : "In",
      "typeSpec" : "Vec3[]"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "cap1ProfileCount",
      "execPortType" : "In",
      "typeSpec" : "UInt32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap1UseProfileOffet",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap2Type",
      "execPortType" : "In",
      "typeSpec" : "UInt32"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "cap2Profile",
      "execPortType" : "In",
      "typeSpec" : "Vec3[]"
      },
    {
      "objectType" : "Port",
      "nodePortType" : "Out",
      "name" : "cap2ProfileCount",
      "execPortType" : "In",
      "typeSpec" : "UInt32"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "cap2UseProfileOffet",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {
        "uiPersistValue" : "true"
        },
      "nodePortType" : "Out",
      "name" : "drawMesh",
      "execPortType" : "In",
      "typeSpec" : "Boolean"
      },
    {
      "objectType" : "Port",
      "metadata" : {},
      "nodePortType" : "Out",
      "name" : "m",
      "execPortType" : "In",
      "typeSpec" : "Mat44"
      }
    ],
  "extDeps" : {},
  "nodes" : [
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":554.6386108398438,\"y\":154.0745544433594}"
        },
      "name" : "EmptyDrawingHandle_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "handle"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle",
      "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":359.0845947265625,\"y\":88.38826751708984}"
        },
      "name" : "twoCircleTangent",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "p1Radius"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "p2Radius"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "p1Num"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "p2Num"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "sideNum"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "totalPos"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "outXfos"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "distance"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "metadata" : {
          "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
          "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
          },
        "title" : "doMath",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "p1Radius",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "p2Radius",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "p1Num",
            "execPortType" : "In",
            "typeSpec" : "Integer"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "p2Num",
            "execPortType" : "In",
            "typeSpec" : "Integer"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "sideNum",
            "execPortType" : "In",
            "typeSpec" : "Integer"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "totalPos",
            "execPortType" : "Out",
            "typeSpec" : "Vec3[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "outXfos",
            "execPortType" : "Out",
            "typeSpec" : "Xfo[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "distance",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            }
          ],
        "extDeps" : {},
        "code" : "dfgEntry {
  
  Integer p1NumC = p1Num > 3 ? p1Num : 3;
  Integer p2NumC = p2Num > 3 ? p2Num : 3;
  
  Float32 y = p2Radius-p1Radius;
  Float32 theta = asin(y/distance);
  Float32 x = sqrt(distance*distance-y*y);
    
  Float32 p1Ang = PI-2*theta;
  Float32 p2Ang = PI+2*theta;
    
  Float32 p1AngInc = p1Ang/(p1NumC-1);
  Float32 p2AngInc = p2Ang/(p2NumC-1);
  
  Float32 sideInc = 1.0 / (sideNum+1);
    
  // all points
  Integer numVerts = (p1NumC + p2NumC + sideNum*2) +1;
  
  // resize out arrays
  totalPos.resize(numVerts);
  outXfos.resize(numVerts);
    
  Xfo xfo();
  Xfo parentXfo();
  parentXfo.ori.setFromEuler(Vec3(0,0,-theta));
  Vec3 v();
  // circle 1
  for (Size i = 0; i < p1NumC; i++){
    v = Vec3(cos(-p1AngInc * (p1NumC-1-i) - PI/2)*p1Radius, sin(-p1AngInc * (p1NumC-1-i) - PI/2)*p1Radius, 0);
    totalPos[i] = parentXfo.transformVector(v);
    xfo = v;
    xfo.ori.setFromEuler(Vec3(0,0,-p1AngInc * (p1NumC-1-i)));
    outXfos[i] = parentXfo * xfo;
  }
  
  // side 1
  Vec3 side1SP = Vec3(0,-p1Radius,0);
  Vec3 side1EP = Vec3(x,-p1Radius,0);  
  for (Size i = 0; i < sideNum; i++){
    v = side1SP.linearInterpolate(side1EP, i * sideInc +sideInc);
    totalPos[p1NumC+i] = parentXfo.transformVector(v);
    xfo.tr = v;
    outXfos[p1NumC+i] = parentXfo * xfo;
  }
   
  // circle 2
  for (Size i = 0; i < p2NumC; i++){
    v = Vec3(cos(p2AngInc * i - PI/2)*p2Radius+x, sin(p2AngInc * i - PI/2)*p2Radius+y, 0);
    totalPos[p1NumC+sideNum+i] = parentXfo.transformVector(v);
    xfo.tr = v;
    xfo.ori.setFromEuler(Vec3(0,0,p2AngInc * i));
    outXfos[p1NumC+sideNum+i] = parentXfo * xfo;
  }
  
  // side 2
  Vec3 side2SP = Vec3(cos(-p1Ang - PI/2)*p1Radius, sin(-p1Ang - PI/2)*p1Radius, 0);
  Vec3 side2EP = Vec3(cos(p2Ang - PI/2)*p2Radius+x, sin(p2Ang - PI/2)*p2Radius+y, 0);  
  for (Size i = 0; i < sideNum; i++){
    v = side2EP.linearInterpolate(side2SP, i * sideInc+sideInc);
    totalPos[p1NumC+sideNum+p2NumC+i] =  parentXfo.transformVector(v);
    xfo.tr = v;
    outXfos[p1NumC+sideNum+p2NumC+i] = parentXfo * xfo;
  }

  // close the arrays i.e. add the first value to the end of the arrays
  totalPos[numVerts-1] = parentXfo.transformVector(side2SP);
  xfo.tr = side2SP;
  outXfos[numVerts-1] = parentXfo * xfo; 
}"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":837.5962524414062,\"y\":99.43050384521484}"
        },
      "name" : "DrawAxesInstances_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "exec"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "name"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "transforms"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "dummyResult"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "instance"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.DrawAxesInstances",
      "presetGUID" : "A2DAC55CB1CE7426981A13F213257B7A"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":992.7430419921875,\"y\":174.8322601318359}"
        },
      "name" : "SetActive_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "active"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.Func.SetActive",
      "presetGUID" : "63CF666747969EEF99B85F6A55F07D5F"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":725.859130859375,\"y\":593.1741943359375}"
        },
      "name" : "extrudeProfiles",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "value"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "outXfos"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "smoothingAngle"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "p1profileType"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "profileScale"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "profileTranslateZ"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "scaleUV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "offsetU"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "offsetV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "scaleU"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "scaleV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "chamferSize"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "profile"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "profileCount"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "chamferMaxAngle"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "useChamfer"
          }
        ],
      "definition" : {
        "objectType" : "Graph",
        "metadata" : {
          "uiGraphZoom" : "{\n  \"value\" : 0.4884407818317413\n  }",
          "uiGraphPan" : "{\n  \"x\" : -504.6219177246094,\n  \"y\" : -37.27103424072266\n  }"
          },
        "title" : "extrudeProfiles",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "value",
            "execPortType" : "Out"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "outXfos",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "smoothingAngle",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "p1profileType",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "profileScale",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "profileTranslateZ",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "scaleUV",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 0
              },
            "name" : "offsetU",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 0
              },
            "name" : "offsetV",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 1
              },
            "name" : "scaleU",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 1
              },
            "name" : "scaleV",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "chamferSize",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "profile",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "profileCount",
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "chamferMaxAngle",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "useChamfer",
            "execPortType" : "In",
            "typeSpec" : "Boolean"
            }
          ],
        "extDeps" : {},
        "nodes" : [
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":620.107421875,\"y\":369.5460205078125}"
              },
            "name" : "AddExtrusion_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "xfos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "profile"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Boolean" : false
                  },
                "name" : "close"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "maxU"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "maxV"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "metadata" : {
                "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Geometry/PolygonMesh.html",
                "uiTooltip" : "Appends a mesh extrusion of a profile defined by a linear curve (line segments), where a transform of each\nsection is specified.\n\n\n Supported by PolygonMesh"
                },
              "title" : "AddExtrusion",
              "ports" : [
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiColor" : "{\n  \"r\" : 51,\n  \"g\" : 1,\n  \"b\" : 106\n  }"
                    },
                  "nodePortType" : "IO",
                  "name" : "this",
                  "execPortType" : "IO",
                  "typeSpec" : "PolygonMesh"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
                    },
                  "nodePortType" : "Out",
                  "name" : "xfos",
                  "execPortType" : "In",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
                    },
                  "nodePortType" : "Out",
                  "name" : "profile",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "close",
                  "execPortType" : "In",
                  "typeSpec" : "Boolean"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "maxU",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "maxV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  }
                ],
              "extDeps" : {
                "petTool" : "*"
                },
              "origPresetGUID" : "72D3380F3702FE7D9A08F441144BC8BF",
              "code" : "require Geometry;

dfgEntry {
  //function PolygonMesh.extrude!(Xfo xfos[], Vec3 profile[], Boolean close, Boolean setUVs, Float32 maxU, Float32 maxV) {
  this.extrude(xfos, profile, close, true, maxU, maxV);
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":285.6816101074219,\"y\":635.74560546875}"
              },
            "name" : "EmptyPolygonMesh_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "mesh"
                }
              ],
            "executable" : "Fabric.Exts.Geometry.PolygonMesh.EmptyPolygonMesh",
            "presetGUID" : "EE0894325519F66F17D265A042545FEB"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":1330.597045898438,\"y\":778.3359985351562}"
              },
            "name" : "RecomputePointNormals_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 0.4000000059604645
                  },
                "name" : "hardAngleRadians"
                }
              ],
            "executable" : "Fabric.Exts.Geometry.PolygonMesh.RecomputePointNormals",
            "presetGUID" : "82B0904C5BAB58BDA9ED038FB18E0629"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":1168.15673828125,\"y\":718.2076416015625}"
              },
            "name" : "Math_degToRad_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "val"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.Math.Func.Math_degToRad",
            "presetGUID" : "6BC97C4D61BFC82DBF0660BAD1104520"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-326.5547790527344,\"y\":879.7454223632812}"
              },
            "name" : "profile1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "array"
                }
              ],
            "definition" : {
              "objectType" : "Graph",
              "metadata" : {
                "uiGraphZoom" : "{\n  \"value\" : 1.614697813987732\n  }",
                "uiGraphPan" : "{\n  \"x\" : 190.8201405410125,\n  \"y\" : -899.8684022278285\n  }"
                },
              "title" : "profile1",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "array",
                  "execPortType" : "Out"
                  }
                ],
              "extDeps" : {},
              "nodes" : [
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":-63.96438980102539,\"y\":597.987060546875}"
                    },
                  "name" : "Vec3_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 0
                        },
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Vec3.Vec3",
                  "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":-61.03969192504883,\"y\":709.12548828125}"
                    },
                  "name" : "Vec3_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 0.4000000059604645
                        },
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Vec3.Vec3",
                  "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":45.71169281005859,\"y\":631.62109375}"
                    },
                  "name" : "Push_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "array"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "element"
                      }
                    ],
                  "executable" : "Fabric.Core.Array.Push",
                  "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":51.56105041503906,\"y\":747.146484375}"
                    },
                  "name" : "Push_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "array"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "element"
                      }
                    ],
                  "executable" : "Fabric.Core.Array.Push",
                  "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":-63.69899368286133,\"y\":820.4968872070312}"
                    },
                  "name" : "Vec3_3",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Vec3.Vec3",
                  "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":46.61972045898438,\"y\":853.8094482421875}"
                    },
                  "name" : "Push_3",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "array"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "element"
                      }
                    ],
                  "executable" : "Fabric.Core.Array.Push",
                  "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
                  }
                ],
              "connections" : {
                "Vec3_1.result" : [
                  "Push_1.element"
                  ],
                "Vec3_2.result" : [
                  "Push_2.element"
                  ],
                "Push_1.array" : [
                  "Push_2.array"
                  ],
                "Push_2.array" : [
                  "Push_3.array"
                  ],
                "Vec3_3.result" : [
                  "Push_3.element"
                  ],
                "Push_3.array" : [
                  "array"
                  ]
                }
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-39.63682556152344,\"y\":792.0142211914062}"
              },
            "name" : "Get_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "index"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "element"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "Get[]",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "array",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[][]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "index",
                  "execPortType" : "In",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "element",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  }
                ],
              "extDeps" : {},
              "origPresetGUID" : "880D755392299678EEB93260424986E2",
              "code" : "
dfgEntry {
	element = array[index];
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-185.9506988525391,\"y\":883.6641845703125}"
              },
            "name" : "Push_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "element"
                }
              ],
            "executable" : "Fabric.Core.Array.Push",
            "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-329.5063171386719,\"y\":962.6416015625}"
              },
            "name" : "profile1_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "array"
                }
              ],
            "definition" : {
              "objectType" : "Graph",
              "metadata" : {
                "uiGraphZoom" : "{\n  \"value\" : 1.614697813987732\n  }",
                "uiGraphPan" : "{\n  \"x\" : 190.8201405410125,\n  \"y\" : -899.8684022278285\n  }"
                },
              "title" : "profile1",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "array",
                  "execPortType" : "Out"
                  }
                ],
              "extDeps" : {},
              "nodes" : [
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":-63.96438980102539,\"y\":597.987060546875}"
                    },
                  "name" : "Vec3_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 0
                        },
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Vec3.Vec3",
                  "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":45.71169281005859,\"y\":631.62109375}"
                    },
                  "name" : "Push_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "array"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "element"
                      }
                    ],
                  "executable" : "Fabric.Core.Array.Push",
                  "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":51.56105041503906,\"y\":747.146484375}"
                    },
                  "name" : "Push_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "array"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "element"
                      }
                    ],
                  "executable" : "Fabric.Core.Array.Push",
                  "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":-63.69899368286133,\"y\":820.4968872070312}"
                    },
                  "name" : "Vec3_3",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Vec3.Vec3",
                  "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":46.61972045898438,\"y\":853.8094482421875}"
                    },
                  "name" : "Push_3",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "array"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "element"
                      }
                    ],
                  "executable" : "Fabric.Core.Array.Push",
                  "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":-64.91625213623047,\"y\":703.4553833007812}"
                    },
                  "name" : "Vec3_4",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 0
                        },
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Vec3.Vec3",
                  "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
                  }
                ],
              "connections" : {
                "Vec3_1.result" : [
                  "Push_1.element"
                  ],
                "Push_1.array" : [
                  "Push_2.array"
                  ],
                "Push_2.array" : [
                  "Push_3.array"
                  ],
                "Vec3_3.result" : [
                  "Push_3.element"
                  ],
                "Push_3.array" : [
                  "array"
                  ],
                "Vec3_4.result" : [
                  "Push_2.element"
                  ]
                }
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-192.5811920166016,\"y\":956.3521728515625}"
              },
            "name" : "Push_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "element"
                }
              ],
            "executable" : "Fabric.Core.Array.Push",
            "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":249.5970458984375,\"y\":778.825927734375}"
              },
            "name" : "transformProfile_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "inProfile"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scale"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "translateZ"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "outProfile"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "transformProfile",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "inProfile",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "scale",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "translateZ",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "outProfile",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  Size num = inProfile.size();
  outProfile.resize(num);
  
  Vec3 v = Vec3(0,0,translateZ);
  for (Size i = 0; i < num; i++){
    outProfile[i] = inProfile[i] * scale + v;
  }
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":865.1100463867188,\"y\":996.5639038085938}"
              },
            "name" : "applyTransform",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "mesh"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "xfo"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "applyTransform",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "IO",
                  "name" : "mesh",
                  "execPortType" : "IO",
                  "typeSpec" : "PolygonMesh"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "xfo",
                  "execPortType" : "In",
                  "typeSpec" : "Xfo"
                  }
                ],
              "extDeps" : {},
              "code" : "require Geometry;

operator PolygonMeshModifyTransformPositions_task<<<index>>>(io PolygonMesh mesh, Xfo xfo)
{
  mesh.setPointPosition(index, xfo.transformVector(mesh.getPointPosition(index)));
}

operator PolygonMeshModifyTransformNormals_task<<<index>>>(io Float32 flatNormals[], Xfo xfo, Boolean repairLengths)
{
  UInt32 i = index * 3;

  // transform.
  Vec3 n(flatNormals[i + 0],
         flatNormals[i + 1],
         flatNormals[i + 2]);
  n = xfo.transformVector(n);
    
  // repair lengths.
  if (repairLengths)
  {
    Float32 len = n.lengthSquared();
    if (len > 1.0e-17)
    {
      n /= sqrt(len);
    }
    else
    {
      n.x = 0;
      n.y = 1;
      n.z = 0;
    }
  }
  
  // put back.
  flatNormals[i + 0] = n.x;
  flatNormals[i + 1] = n.y;
  flatNormals[i + 2] = n.z;
}

dfgEntry
{
  // positions.
  if (xfo != Xfo())
  {
    // transform and increment version.
    PolygonMeshModifyTransformPositions_task<<<mesh.pointCount()>>>(mesh, xfo);
    mesh.incrementPointPositionsVersion();
  }
  
  // normals.
  Xfo xfn = Xfo(xfo.ori, Vec3(0, 0, 0), xfo.sc);
  if (xfn != Xfo())
  {
    // get polygon node normals as a flat array.
    Float32 flatNormals[];
    flatNormals.resize(3 * mesh.polygonPointsCount());
    Float32 extFlatNormals<>(flatNormals); 
    mesh.getNormalsAsExternalArray(extFlatNormals);
    
    // transform.
    Boolean repairNormals = (xfn.sc != Vec3(1.0, 1.0, 1.0));
    PolygonMeshModifyTransformNormals_task<<<mesh.polygonPointsCount()>>>(flatNormals, xfn, repairNormals);
    
    // set normals from flat array.
    mesh.setNormalsFromExternalArray(flatNormals);
    
    // increment version.
    mesh.incrementNormalsVersion();
  }
}

"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":639.2070922851562,\"y\":859.387939453125}"
              },
            "name" : "ClonePolygonMesh",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "value"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.Geometry.PolygonMesh.ClonePolygonMesh",
            "presetGUID" : "8480EBBD95E54A412E1471D01B474BA2"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":711.3750610351562,\"y\":1058.680786132812}"
              },
            "name" : "Xfo_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "ori"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "tr"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "sc"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.Math.Xfo.Xfo",
            "presetGUID" : "A0F6CD63A2069530481F214C62A069AA"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":585.822509765625,\"y\":1058.681762695312}"
              },
            "name" : "SetFromEuler_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "e"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.Math.Quat.SetFromEuler",
            "presetGUID" : "FCDF5BF056AE4ED6E25A3268BAC86C77"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":477.7515563964844,\"y\":1055.5029296875}"
              },
            "name" : "Euler_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "x"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "y"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "z"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "order"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.Math.Euler.Euler",
            "presetGUID" : "4C1B6C23651EE376EAC335567AF0ADF2"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":342.6629943847656,\"y\":1055.502685546875}"
              },
            "name" : "Math_degToRad_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 180
                  },
                "name" : "val"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "result"
                }
              ],
            "executable" : "Fabric.Exts.Math.Func.Math_degToRad",
            "presetGUID" : "6BC97C4D61BFC82DBF0660BAD1104520"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":1184.97900390625,\"y\":813.9322509765625}"
              },
            "name" : "MergeMesh_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "source"
                }
              ],
            "executable" : "Fabric.Exts.Geometry.PolygonMesh.MergeMesh",
            "presetGUID" : "A68C3C98E78BEA71DDD7A2DB92CD5CBE"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":490.4661254882812,\"y\":683.0586547851562}"
              },
            "name" : "addExtrusionWithUV",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "profile"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "xfos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleU"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleV"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "offsetU"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "offsetV"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleUV"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "metadata" : {
                "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
                },
              "title" : "extrude",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "IO",
                  "name" : "this",
                  "execPortType" : "IO",
                  "typeSpec" : "PolygonMesh"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "profile",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "xfos",
                  "execPortType" : "In",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "scaleU",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "scaleV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "offsetU",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "offsetV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "scaleUV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {

  if(profile.size() < 2)
    return;
  if(xfos.size() < 2)
    return;

  Float32 uSpacing[];
  uSpacing.resize(profile.size());
    
  // todo: do not need the first u value to be 0
  for(Size i=0; i<profile.size(); i++) {
    if (i == 0){
      uSpacing[0] = 0;
    }
    else {
      uSpacing[i] = uSpacing[i-1] + (profile[i-1] - profile[i]).length();
    }
  }
  
  
  Float32 vSpacing[];
  vSpacing.resize(xfos.size());
  // todo: do not need the first v value to be 0
  for(Size i=0;i<xfos.size();i++) {
    if (i == 0){
      vSpacing[0] = 0;
    }
    else{
      vSpacing[i] = vSpacing[i-1] + (xfos[i].tr - xfos[i-1].tr).length();
    }
  }
  
  Size nbSegments = profile.size() - 1;
  
  // todo: fix here?
  Size nbPointRows = xfos.size();
  Size nbQuadRows = nbPointRows - 1;
  
  Size nbPoints = profile.size() * nbPointRows;
  Size firstPoint = this.createPoints(nbPoints);
  
  for(Size i=0;i<nbPoints;i++) {
    Size row = i / profile.size();
    Size pointIndex = i % profile.size();
    Vec3 pos = xfos[row].transformVector(profile[pointIndex]);
    this.setPointPosition(firstPoint+i, pos);
  }

  Ref<Vec2Attribute> uvs = null;
  uvs = this.getOrCreateVec2Attribute(\"uvs0\");
    
    
  this.beginStructureChanges();

  Size nbQuads = nbSegments * nbQuadRows;
  Size v0, v1, v2, v3;
  Float32 uStart, uEnd, vStart, vEnd;
  Float32 maxV = vSpacing[vSpacing.size()-1] * scaleUV * scaleV;
  
  for(Size i=0;i<nbQuads;i++) {

    Size segmentIndex = i % nbSegments;
    Size row = i / nbSegments;

    if (row == 0){
      vStart = maxV - offsetV;
      vEnd = maxV - (vSpacing[1] * scaleUV * scaleV + offsetV);
    }
    else{
      vStart = maxV - (vSpacing[row] * scaleUV * scaleV + offsetV);
      vEnd = maxV - (vSpacing[row+1] * scaleUV * scaleV + offsetV);
    }

    uStart = uSpacing[segmentIndex] * scaleUV * scaleU + offsetU;
    uEnd = uSpacing[segmentIndex+1] * scaleUV * scaleU + offsetU;
        
    if(segmentIndex == profile.size() - 1) {
      v0 = (profile.size() * row + segmentIndex) % nbPoints;
      v1 = (profile.size() * row) % nbPoints;
      v2 = (profile.size() * (row+1)) % nbPoints;
      v3 = (profile.size() * (row+1) + segmentIndex) % nbPoints;
    } else {
      v0 = (profile.size() * row + segmentIndex) % nbPoints;
      v1 = (profile.size() * row + segmentIndex + 1) % nbPoints;
      v2 = (profile.size() * (row+1) + segmentIndex + 1) % nbPoints;
      v3 = (profile.size() * (row+1) + segmentIndex) % nbPoints;
    }
    
    this.addPolygon(firstPoint+v3, firstPoint+v2, firstPoint+v1, firstPoint+v0);

    this.setPolygonAttribute(i, 0, uvs, Vec2(uStart, vEnd));
    this.setPolygonAttribute(i, 1, uvs, Vec2(uEnd, vEnd));
    this.setPolygonAttribute(i, 2, uvs, Vec2(uEnd, vStart));
    this.setPolygonAttribute(i, 3, uvs, Vec2(uStart, vStart));
  }

  this.endStructureChanges();
}




"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-188.5879058837891,\"y\":793.2432250976562}"
              },
            "name" : "Push_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "element"
                }
              ],
            "executable" : "Fabric.Core.Array.Push",
            "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-331.2944641113281,\"y\":766.317138671875}"
              },
            "name" : "Resize_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "count"
                }
              ],
            "executable" : "Fabric.Core.Array.Resize",
            "presetGUID" : "73292917610FDC85B6E59510604F2467"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":117.151725769043,\"y\":782.1986694335938}"
              },
            "name" : "addChamfer",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "inPos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "size"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "maxAngle"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "outPos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "active"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "addChamfer",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "inPos",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "size",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "maxAngle",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "outPos",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "active",
                  "execPortType" : "In",
                  "typeSpec" : "Boolean"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {

  if (!active){
    outPos.resize(inPos.size());
    outPos = inPos;
    return;
  }
  
  Size numOutPos = (inPos.size()-2) * 2 + 2;
  Float32 maxAngRad = Math_degToRad(maxAngle);
  Vec3 temp[];
  Vec3 v1, v2;
  Float32 theta;

  for (Size i = 0; i < inPos.size(); i++){
    
    if (i == 0){
      temp.push(inPos[0]);
    }
    else if (i == inPos.size()-1){
      temp.push(inPos[inPos.size()-1]);
    }
    else {
      v1 = inPos[i-1] - inPos[i];
      v2 = inPos[i+1] - inPos[i];
      
      if (v1 != Vec3(0,0,0)){
        v1.normalize();
      }
      if (v2 != Vec3(0,0,0)){
        v2.normalize();
      }

      theta = acos(v1.dot(v2));
      
      if (theta <= maxAngRad){                
        Float32 hyp = (size*.5) / sin(theta*.5);
        temp.push(inPos[i] + v1 * hyp);
        temp.push(inPos[i] + v2 * hyp);
      }
      else{
        temp.push(inPos[i]);
      }
    }
  }
  outPos.resize(temp.size());
  outPos = temp;
}
"
              }
            }
          ],
        "connections" : {
          "outXfos" : [
            "addExtrusionWithUV.xfos"
            ],
          "smoothingAngle" : [
            "Math_degToRad_1.val"
            ],
          "p1profileType" : [
            "Get_1.index"
            ],
          "profileScale" : [
            "transformProfile_3.scale"
            ],
          "profileTranslateZ" : [
            "transformProfile_3.translateZ"
            ],
          "scaleUV" : [
            "addExtrusionWithUV.scaleUV"
            ],
          "offsetU" : [
            "addExtrusionWithUV.offsetU"
            ],
          "offsetV" : [
            "addExtrusionWithUV.offsetV"
            ],
          "scaleU" : [
            "addExtrusionWithUV.scaleU"
            ],
          "scaleV" : [
            "addExtrusionWithUV.scaleV"
            ],
          "chamferSize" : [
            "addChamfer.size"
            ],
          "profile" : [
            "Resize_1.array"
            ],
          "profileCount" : [
            "Resize_1.count"
            ],
          "chamferMaxAngle" : [
            "addChamfer.maxAngle"
            ],
          "useChamfer" : [
            "addChamfer.active"
            ],
          "EmptyPolygonMesh_1.mesh" : [
            "addExtrusionWithUV.this"
            ],
          "RecomputePointNormals_1.this" : [
            "value"
            ],
          "Math_degToRad_1.result" : [
            "RecomputePointNormals_1.hardAngleRadians"
            ],
          "profile1.array" : [
            "Push_1.element"
            ],
          "Get_1.element" : [
            "addChamfer.inPos"
            ],
          "Push_1.array" : [
            "Push_2.array"
            ],
          "profile1_2.array" : [
            "Push_2.element"
            ],
          "Push_2.array" : [
            "Get_1.array"
            ],
          "transformProfile_3.outProfile" : [
            "addExtrusionWithUV.profile"
            ],
          "applyTransform.mesh" : [
            "MergeMesh_1.source"
            ],
          "ClonePolygonMesh.result" : [
            "applyTransform.mesh"
            ],
          "Xfo_1.result" : [
            "applyTransform.xfo"
            ],
          "SetFromEuler_1.result" : [
            "Xfo_1.ori"
            ],
          "Euler_1.result" : [
            "SetFromEuler_1.e"
            ],
          "Math_degToRad_2.result" : [
            "Euler_1.x"
            ],
          "MergeMesh_1.this" : [
            "RecomputePointNormals_1.this"
            ],
          "addExtrusionWithUV.this" : [
            "ClonePolygonMesh.value",
            "MergeMesh_1.this"
            ],
          "Push_3.array" : [
            "Push_1.array"
            ],
          "Resize_1.array" : [
            "Push_3.element"
            ],
          "addChamfer.outPos" : [
            "transformProfile_3.inProfile"
            ]
          }
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1893.812866210938,\"y\":529.8751831054688}"
        },
      "name" : "DrawTexturedPolygonMesh_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "exec"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "String" : "texturedMesh"
            },
          "name" : "name"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "String" : "/Users/johan/Dev/fabricEngine/canvas/assets/coloredTiles.jpg"
            },
          "name" : "filePath"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "specular"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "specFactor"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "ambient"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "transform"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "wireFrame"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "doubleSided"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "dummyResult"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "instance"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.DrawTexturedPolygonMesh",
      "presetGUID" : "2422BED0AFC9A66EFC9086103DB69004"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1891.557373046875,\"y\":399.0709838867188}"
        },
      "name" : "DrawMesh_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "color"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "drawThis"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "doubleSided"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "wireFrame"
          }
        ],
      "definition" : {
        "objectType" : "Graph",
        "metadata" : {
          "uiNodeColor" : "{\n  \"r\" : 120,\n  \"g\" : 130,\n  \"b\" : 144\n  }",
          "uiGraphZoom" : "{\n  \"value\" : 0.7720388770103455\n  }",
          "uiHeaderColor" : "{\n  \"r\" : 88,\n  \"g\" : 92,\n  \"b\" : 110\n  }",
          "uiTooltip" : "Draws a mesh into the viewport.",
          "uiGraphPan" : "{\n  \"x\" : -314.702360779047,\n  \"y\" : 162.1256220042706\n  }"
          },
        "title" : "DrawMesh",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "mesh",
            "execPortType" : "In",
            "typeSpec" : "PolygonMesh"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Color" : {
                "r" : 0.800000011920929,
                "g" : 0.800000011920929,
                "b" : 0.800000011920929,
                "a" : 1
                }
              },
            "name" : "color",
            "execPortType" : "In",
            "typeSpec" : "Color"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "drawThis",
            "execPortType" : "Out",
            "typeSpec" : "DrawingHandle"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "doubleSided",
            "execPortType" : "In",
            "typeSpec" : "Boolean"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "wireFrame",
            "execPortType" : "In",
            "typeSpec" : "Boolean"
            }
          ],
        "extDeps" : {
          "InlineDrawing" : "*",
          "Geometry" : "*"
          },
        "origPresetGUID" : "59E079DAED6CF13C89D28C7720F48B18",
        "nodes" : [
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\": 838, \"y\": 108}"
              },
            "name" : "DrawPolygonMesh",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "exec"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "name"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "color"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "specular"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "specFactor"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "transform"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "mesh"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "wireFrame"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "doubleSided"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "dummyResult"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "instance"
                }
              ],
            "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.DrawPolygonMesh",
            "presetGUID" : "88D132945A91B3FEB731B90CE41878AF"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":472.0,\"y\":68.0}"
              },
            "name" : "EmptyDrawingHandle",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "handle"
                }
              ],
            "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle",
            "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70"
            }
          ],
        "connections" : {
          "mesh" : [
            "DrawPolygonMesh.mesh"
            ],
          "color" : [
            "DrawPolygonMesh.color"
            ],
          "doubleSided" : [
            "DrawPolygonMesh.doubleSided"
            ],
          "wireFrame" : [
            "DrawPolygonMesh.wireFrame"
            ],
          "DrawPolygonMesh.this" : [
            "drawThis"
            ],
          "EmptyDrawingHandle.handle" : [
            "DrawPolygonMesh.this"
            ]
          }
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2319.7919921875,\"y\":417.9536743164062}"
        },
      "name" : "SetActive_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "active"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.Func.SetActive",
      "presetGUID" : "63CF666747969EEF99B85F6A55F07D5F"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2232.561279296875,\"y\":736.6253051757812}"
        },
      "name" : "SetActive_3",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "active"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.Func.SetActive",
      "presetGUID" : "63CF666747969EEF99B85F6A55F07D5F"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2046.684936523438,\"y\":437.5558471679688}"
        },
      "name" : "Not_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "value"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Logic.Not",
      "presetGUID" : "B8FE3CDCF84BBE1B3A07C80E724FB147"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1821.234619140625,\"y\":-456.8670043945312}"
        },
      "name" : "DrawTexturedPolygonMesh_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "exec"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "String" : "capTexturedMesh"
            },
          "name" : "name"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "String" : "/Users/johan/Dev/fabricEngine/canvas/assets/coloredTiles.jpg"
            },
          "name" : "filePath"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "specular"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Float32" : 16
            },
          "name" : "specFactor"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "ambient"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "transform"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Boolean" : false
            },
          "name" : "wireFrame"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "defaultValues" : {
            "Boolean" : true
            },
          "name" : "doubleSided"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "dummyResult"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "instance"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.DrawTexturedPolygonMesh",
      "presetGUID" : "2422BED0AFC9A66EFC9086103DB69004"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1045.627319335938,\"y\":-359.3787536621094}"
        },
      "name" : "Xfo_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "ori"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "tr"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "sc"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Exts.Math.Xfo.Xfo",
      "presetGUID" : "A0F6CD63A2069530481F214C62A069AA"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":933.7374877929688,\"y\":-353.4386291503906}"
        },
      "name" : "Vec3_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "x"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "y"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "z"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Exts.Math.Vec3.Vec3",
      "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1669.7421875,\"y\":-491.2742309570312}"
        },
      "name" : "Cache",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "value"
          }
        ],
      "executable" : "Fabric.Core.Data.Cache",
      "presetGUID" : "D903AFD981FE9214C69943F542D5FD60"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1159.17041015625,\"y\":-415.7052001953125}"
        },
      "name" : "applyTransform",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "xfo"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "title" : "applyTransform",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "IO",
            "name" : "mesh",
            "execPortType" : "IO",
            "typeSpec" : "PolygonMesh"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "xfo",
            "execPortType" : "In",
            "typeSpec" : "Xfo"
            }
          ],
        "extDeps" : {},
        "code" : "require Geometry;

operator PolygonMeshModifyTransformPositions_task<<<index>>>(io PolygonMesh mesh, Xfo xfo)
{
  mesh.setPointPosition(index, xfo.transformVector(mesh.getPointPosition(index)));
}

operator PolygonMeshModifyTransformNormals_task<<<index>>>(io Float32 flatNormals[], Xfo xfo, Boolean repairLengths)
{
  UInt32 i = index * 3;

  // transform.
  Vec3 n(flatNormals[i + 0],
         flatNormals[i + 1],
         flatNormals[i + 2]);
  n = xfo.transformVector(n);
    
  // repair lengths.
  if (repairLengths)
  {
    Float32 len = n.lengthSquared();
    if (len > 1.0e-17)
    {
      n /= sqrt(len);
    }
    else
    {
      n.x = 0;
      n.y = 1;
      n.z = 0;
    }
  }
  
  // put back.
  flatNormals[i + 0] = n.x;
  flatNormals[i + 1] = n.y;
  flatNormals[i + 2] = n.z;
}

dfgEntry
{
  // positions.
  if (xfo != Xfo())
  {
    // transform and increment version.
    PolygonMeshModifyTransformPositions_task<<<mesh.pointCount()>>>(mesh, xfo);
    mesh.incrementPointPositionsVersion();
  }
  
  // normals.
  Xfo xfn = Xfo(xfo.ori, Vec3(0, 0, 0), xfo.sc);
  if (xfn != Xfo())
  {
    // get polygon node normals as a flat array.
    Float32 flatNormals[];
    flatNormals.resize(3 * mesh.polygonPointsCount());
    Float32 extFlatNormals<>(flatNormals); 
    mesh.getNormalsAsExternalArray(extFlatNormals);
    
    // transform.
    Boolean repairNormals = (xfn.sc != Vec3(1.0, 1.0, 1.0));
    PolygonMeshModifyTransformNormals_task<<<mesh.polygonPointsCount()>>>(flatNormals, xfn, repairNormals);
    
    // set normals from flat array.
    mesh.setNormalsFromExternalArray(flatNormals);
    
    // increment version.
    mesh.incrementNormalsVersion();
  }
}

"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1314.488159179688,\"y\":-492.3143615722656}"
        },
      "name" : "MergeMesh_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "source"
          }
        ],
      "executable" : "Fabric.Exts.Geometry.PolygonMesh.MergeMesh",
      "presetGUID" : "A68C3C98E78BEA71DDD7A2DB92CD5CBE"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1873.937255859375,\"y\":-589.1547241210938}"
        },
      "name" : "DrawMesh_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "color"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "drawThis"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "doubleSided"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "wireFrame"
          }
        ],
      "definition" : {
        "objectType" : "Graph",
        "metadata" : {
          "uiNodeColor" : "{\n  \"r\" : 120,\n  \"g\" : 130,\n  \"b\" : 144\n  }",
          "uiGraphZoom" : "{\n  \"value\" : 0.7720388770103455\n  }",
          "uiHeaderColor" : "{\n  \"r\" : 88,\n  \"g\" : 92,\n  \"b\" : 110\n  }",
          "uiTooltip" : "Draws a mesh into the viewport.",
          "uiGraphPan" : "{\n  \"x\" : -314.702360779047,\n  \"y\" : 162.1256220042706\n  }"
          },
        "title" : "DrawMesh",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "mesh",
            "execPortType" : "In",
            "typeSpec" : "PolygonMesh"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Color" : {
                "r" : 0.800000011920929,
                "g" : 0.800000011920929,
                "b" : 0.800000011920929,
                "a" : 1
                }
              },
            "name" : "color",
            "execPortType" : "In",
            "typeSpec" : "Color"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "drawThis",
            "execPortType" : "Out",
            "typeSpec" : "DrawingHandle"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "doubleSided",
            "execPortType" : "In",
            "typeSpec" : "Boolean"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "wireFrame",
            "execPortType" : "In",
            "typeSpec" : "Boolean"
            }
          ],
        "extDeps" : {
          "InlineDrawing" : "*",
          "Geometry" : "*"
          },
        "origPresetGUID" : "59E079DAED6CF13C89D28C7720F48B18",
        "nodes" : [
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\": 838, \"y\": 108}"
              },
            "name" : "DrawPolygonMesh",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "exec"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "name"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "color"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "specular"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "specFactor"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "transform"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "mesh"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "wireFrame"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "doubleSided"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "dummyResult"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "instance"
                }
              ],
            "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.DrawPolygonMesh",
            "presetGUID" : "88D132945A91B3FEB731B90CE41878AF"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":472.0,\"y\":68.0}"
              },
            "name" : "EmptyDrawingHandle",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "handle"
                }
              ],
            "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle",
            "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70"
            }
          ],
        "connections" : {
          "mesh" : [
            "DrawPolygonMesh.mesh"
            ],
          "color" : [
            "DrawPolygonMesh.color"
            ],
          "doubleSided" : [
            "DrawPolygonMesh.doubleSided"
            ],
          "wireFrame" : [
            "DrawPolygonMesh.wireFrame"
            ],
          "DrawPolygonMesh.this" : [
            "drawThis"
            ],
          "EmptyDrawingHandle.handle" : [
            "DrawPolygonMesh.this"
            ]
          }
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2409.732666015625,\"y\":-561.2402954101562}"
        },
      "name" : "SetActive_5",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "active"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.Func.SetActive",
      "presetGUID" : "63CF666747969EEF99B85F6A55F07D5F"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2346.251220703125,\"y\":-238.6452331542969}"
        },
      "name" : "SetActive_6",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "active"
          }
        ],
      "executable" : "Fabric.Exts.InlineDrawing.Func.SetActive",
      "presetGUID" : "63CF666747969EEF99B85F6A55F07D5F"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2038.849975585938,\"y\":-505.2349853515625}"
        },
      "name" : "Not_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "value"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Logic.Not",
      "presetGUID" : "B8FE3CDCF84BBE1B3A07C80E724FB147"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2077.380859375,\"y\":-306.5597229003906}"
        },
      "name" : "And_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "lhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Logic.And",
      "presetGUID" : "5C4DF279926CC4AFD90CCD43A2E07655"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2168.8916015625,\"y\":-505.2349853515625}"
        },
      "name" : "And_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "lhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Logic.And",
      "presetGUID" : "5C4DF279926CC4AFD90CCD43A2E07655"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiComment" : "cap 1",
        "uiGraphPos" : "{\"x\":433.6223754882812,\"y\":-491.3624877929688}",
        "uiCommentExpanded" : "true"
        },
      "name" : "createCap",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capRadius"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capRadiusOffset"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capSegments"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "CapSmoothinAngle"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "sideProfileTransZ"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capZoffset"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capProfileScale"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capChamferSize"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capChamferMaxAngle"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capUseChamfer"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capType"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capProfile"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capProfileCount"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capScaleUV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capScaleU"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capScaleV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capOffsetU"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capOffsetV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "xfos"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "useProfileOffet"
          }
        ],
      "definition" : {
        "objectType" : "Graph",
        "metadata" : {
          "uiGraphZoom" : "{\n  \"value\" : 0.4322856068611145\n  }",
          "uiGraphPan" : "{\n  \"x\" : 181.5829131506653,\n  \"y\" : 504.1815594615282\n  }"
          },
        "title" : "createCap",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "mesh",
            "execPortType" : "Out"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capRadius",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capRadiusOffset",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capSegments",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "CapSmoothinAngle",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "sideProfileTransZ",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capZoffset",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capProfileScale",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capChamferSize",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capChamferMaxAngle",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capUseChamfer",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capType",
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capProfile",
            "execPortType" : "In",
            "typeSpec" : "Vec3[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capProfileCount",
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capScaleUV",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 1
              },
            "name" : "capScaleU",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 1
              },
            "name" : "capScaleV",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capOffsetU",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capOffsetV",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "xfos",
            "execPortType" : "Out",
            "typeSpec" : "Xfo[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "useProfileOffet",
            "execPortType" : "In",
            "typeSpec" : "Boolean"
            }
          ],
        "extDeps" : {},
        "nodes" : [
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":563.6953735351562,\"y\":-438.3607788085938}"
              },
            "name" : "createCapMesh",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "xfos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "profile"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "radius"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "radiusOffset"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "numSegments"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 20
                  },
                "name" : "smoothinAngle"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "profileTransZ"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "profileTransZOffset"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleUV"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleU"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleV"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "offsetU"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "offsetV"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "useProfileOffet"
                }
              ],
            "definition" : {
              "objectType" : "Graph",
              "metadata" : {
                "uiGraphZoom" : "{\n  \"value\" : 0.5672940015792847\n  }",
                "uiGraphPan" : "{\n  \"x\" : -333.64453125,\n  \"y\" : 189.9575958251953\n  }"
                },
              "title" : "createCapMesh",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "xfos",
                  "execPortType" : "Out",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "this",
                  "execPortType" : "Out",
                  "typeSpec" : "PolygonMesh"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "profile",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "radius",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiRange" : "(0, 10)"
                    },
                  "nodePortType" : "Out",
                  "name" : "radiusOffset",
                  "execPortType" : "In"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "numSegments",
                  "execPortType" : "In",
                  "typeSpec" : "Integer"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiRange" : "(0, 180)"
                    },
                  "nodePortType" : "Out",
                  "name" : "smoothinAngle",
                  "execPortType" : "In",
                  "typeSpec" : "Scalar"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "profileTransZ",
                  "execPortType" : "In"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiRange" : "(0, 10)"
                    },
                  "nodePortType" : "Out",
                  "name" : "profileTransZOffset",
                  "execPortType" : "In"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "scaleUV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "defaultValues" : {
                    "Float32" : 1
                    },
                  "name" : "scaleU",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "defaultValues" : {
                    "Float32" : 1
                    },
                  "name" : "scaleV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "offsetU",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "offsetV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "useProfileOffet",
                  "execPortType" : "In"
                  }
                ],
              "extDeps" : {},
              "nodes" : [
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":713.6862182617188,\"y\":-196.6073455810547}"
                    },
                  "name" : "addRadialXfos",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "num"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "radius"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Boolean" : true
                        },
                      "name" : "close"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "xfos"
                      }
                    ],
                  "definition" : {
                    "objectType" : "Func",
                    "title" : "addRadialXfos",
                    "ports" : [
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "num",
                        "execPortType" : "In",
                        "typeSpec" : "Integer"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "radius",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "close",
                        "execPortType" : "In",
                        "typeSpec" : "Boolean"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "In",
                        "name" : "xfos",
                        "execPortType" : "Out",
                        "typeSpec" : "Xfo[]"
                        }
                      ],
                    "extDeps" : {},
                    "code" : "dfgEntry {

  close? xfos.resize(num+1) : xfos.resize(num);
  
  Xfo xfo();
  Float32 inc = PI*2 / num;
  for (Size i = 0; i < num; i++){
    xfo.tr = Vec3(cos(inc*i)*radius, sin(inc*i)*radius, 0);
    xfo.ori.setFromEuler(Vec3(0,0,inc*i+PI*.5));
    xfos[i] = xfo;
  }

  if (close) {
    xfos[xfos.size()-1] = xfos[0];
  }
}
"
                    }
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":993.9868774414062,\"y\":-188.8872375488281}"
                    },
                  "name" : "EmptyPolygonMesh_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "mesh"
                      }
                    ],
                  "executable" : "Fabric.Exts.Geometry.PolygonMesh.EmptyPolygonMesh",
                  "presetGUID" : "EE0894325519F66F17D265A042545FEB"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1174.113525390625,\"y\":-145.0049591064453}"
                    },
                  "name" : "addExtrusionWithUV",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "this"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "profile"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "xfos"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "scaleU"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "scaleV"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "offsetU"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "offsetV"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "scaleUV"
                      }
                    ],
                  "definition" : {
                    "objectType" : "Func",
                    "metadata" : {
                      "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                      "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
                      },
                    "title" : "extrude",
                    "ports" : [
                      {
                        "objectType" : "Port",
                        "nodePortType" : "IO",
                        "name" : "this",
                        "execPortType" : "IO",
                        "typeSpec" : "PolygonMesh"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "profile",
                        "execPortType" : "In",
                        "typeSpec" : "Vec3[]"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "xfos",
                        "execPortType" : "In",
                        "typeSpec" : "Xfo[]"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "scaleU",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "scaleV",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "offsetU",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "offsetV",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "scaleUV",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        }
                      ],
                    "extDeps" : {},
                    "code" : "dfgEntry {

  if(profile.size() < 2)
    return;
  if(xfos.size() < 2)
    return;

  Float32 uSpacing[];
  uSpacing.resize(profile.size());
    
  // todo: do not need the first u value to be 0
  for(Size i=0; i<profile.size(); i++) {
    if (i == 0){
      uSpacing[0] = 0;
    }
    else {
      uSpacing[i] = uSpacing[i-1] + (profile[i-1] - profile[i]).length();
    }
  }
  
  
  Float32 vSpacing[];
  vSpacing.resize(xfos.size());
  // todo: do not need the first v value to be 0
  for(Size i=0;i<xfos.size();i++) {
    if (i == 0){
      vSpacing[0] = 0;
    }
    else{
      vSpacing[i] = vSpacing[i-1] + (xfos[i].tr - xfos[i-1].tr).length();
    }
  }
  
  Size nbSegments = profile.size() - 1;
  
  // todo: fix here?
  Size nbPointRows = xfos.size();
  Size nbQuadRows = nbPointRows - 1;
  
  Size nbPoints = profile.size() * nbPointRows;
  Size firstPoint = this.createPoints(nbPoints);
  
  for(Size i=0;i<nbPoints;i++) {
    Size row = i / profile.size();
    Size pointIndex = i % profile.size();
    Vec3 pos = xfos[row].transformVector(profile[pointIndex]);
    this.setPointPosition(firstPoint+i, pos);
  }

  Ref<Vec2Attribute> uvs = null;
  uvs = this.getOrCreateVec2Attribute(\"uvs0\");
    
    
  this.beginStructureChanges();

  Size nbQuads = nbSegments * nbQuadRows;
  Size v0, v1, v2, v3;
  Float32 uStart, uEnd, vStart, vEnd;
  Float32 maxV = vSpacing[vSpacing.size()-1] * scaleUV * scaleV;
  
  for(Size i=0;i<nbQuads;i++) {

    Size segmentIndex = i % nbSegments;
    Size row = i / nbSegments;

    if (row == 0){
      vStart = maxV - offsetV;
      vEnd = maxV - (vSpacing[1] * scaleUV * scaleV + offsetV);
    }
    else{
      vStart = maxV - (vSpacing[row] * scaleUV * scaleV + offsetV);
      vEnd = maxV - (vSpacing[row+1] * scaleUV * scaleV + offsetV);
    }

    uStart = uSpacing[segmentIndex] * scaleUV * scaleU + offsetU;
    uEnd = uSpacing[segmentIndex+1] * scaleUV * scaleU + offsetU;
        
    if(segmentIndex == profile.size() - 1) {
      v0 = (profile.size() * row + segmentIndex) % nbPoints;
      v1 = (profile.size() * row) % nbPoints;
      v2 = (profile.size() * (row+1)) % nbPoints;
      v3 = (profile.size() * (row+1) + segmentIndex) % nbPoints;
    } else {
      v0 = (profile.size() * row + segmentIndex) % nbPoints;
      v1 = (profile.size() * row + segmentIndex + 1) % nbPoints;
      v2 = (profile.size() * (row+1) + segmentIndex + 1) % nbPoints;
      v3 = (profile.size() * (row+1) + segmentIndex) % nbPoints;
    }
    
    this.addPolygon(firstPoint+v3, firstPoint+v2, firstPoint+v1, firstPoint+v0);

    this.setPolygonAttribute(i, 0, uvs, Vec2(uStart, vEnd));
    this.setPolygonAttribute(i, 1, uvs, Vec2(uEnd, vEnd));
    this.setPolygonAttribute(i, 2, uvs, Vec2(uEnd, vStart));
    this.setPolygonAttribute(i, 3, uvs, Vec2(uStart, vStart));
  }

  this.endStructureChanges();
}




"
                    }
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":2553.064208984375,\"y\":-198.4133148193359}"
                    },
                  "name" : "RecomputePointNormals_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "this"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "hardAngleRadians"
                      }
                    ],
                  "executable" : "Fabric.Exts.Geometry.PolygonMesh.RecomputePointNormals",
                  "presetGUID" : "82B0904C5BAB58BDA9ED038FB18E0629"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":2393.921142578125,\"y\":-232.3416290283203}"
                    },
                  "name" : "Math_degToRad_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "val"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Func.Math_degToRad",
                  "presetGUID" : "6BC97C4D61BFC82DBF0660BAD1104520"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":581.5926513671875,\"y\":-184.8209228515625}"
                    },
                  "name" : "Sub_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "lhs"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "rhs"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Core.Math.Sub",
                  "presetGUID" : "F9754B19F43BC017056B8BA291E7B8B4"
                  },
                {
                  "objectType" : "User",
                  "metadata" : {
                    "uiTitle" : "create xfos",
                    "uiGraphPos" : "{\"x\":546.750732421875,\"y\":-236.3871307373047}",
                    "uiNodeColor" : "{\n  \"r\" : 183,\n  \"g\" : 110,\n  \"b\" : 43\n  }",
                    "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                    "uiGraphSize" : "{\"w\":390.9342346191406,\"h\":180.0375671386719}"
                    },
                  "name" : "backDrop_2",
                  "ports" : []
                  },
                {
                  "objectType" : "User",
                  "metadata" : {
                    "uiTitle" : "create mesh extrusion",
                    "uiGraphPos" : "{\"x\":968.212890625,\"y\":-232.7274475097656}",
                    "uiNodeColor" : "{\n  \"r\" : 60,\n  \"g\" : 47,\n  \"b\" : 159\n  }",
                    "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                    "uiGraphSize" : "{\"w\":392.3278503417969,\"h\":309.6498413085938}"
                    },
                  "name" : "backDrop_3",
                  "ports" : []
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1527.822143554688,\"y\":-145.8751373291016}"
                    },
                  "name" : "applyTransform",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "mesh"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "xfo"
                      }
                    ],
                  "definition" : {
                    "objectType" : "Func",
                    "title" : "applyTransform",
                    "ports" : [
                      {
                        "objectType" : "Port",
                        "nodePortType" : "IO",
                        "name" : "mesh",
                        "execPortType" : "IO",
                        "typeSpec" : "PolygonMesh"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "xfo",
                        "execPortType" : "In",
                        "typeSpec" : "Xfo"
                        }
                      ],
                    "extDeps" : {},
                    "code" : "require Geometry;

operator PolygonMeshModifyTransformPositions_task<<<index>>>(io PolygonMesh mesh, Xfo xfo)
{
  mesh.setPointPosition(index, xfo.transformVector(mesh.getPointPosition(index)));
}

operator PolygonMeshModifyTransformNormals_task<<<index>>>(io Float32 flatNormals[], Xfo xfo, Boolean repairLengths)
{
  UInt32 i = index * 3;

  // transform.
  Vec3 n(flatNormals[i + 0],
         flatNormals[i + 1],
         flatNormals[i + 2]);
  n = xfo.transformVector(n);
    
  // repair lengths.
  if (repairLengths)
  {
    Float32 len = n.lengthSquared();
    if (len > 1.0e-17)
    {
      n /= sqrt(len);
    }
    else
    {
      n.x = 0;
      n.y = 1;
      n.z = 0;
    }
  }
  
  // put back.
  flatNormals[i + 0] = n.x;
  flatNormals[i + 1] = n.y;
  flatNormals[i + 2] = n.z;
}

dfgEntry
{
  // positions.
  if (xfo != Xfo())
  {
    // transform and increment version.
    PolygonMeshModifyTransformPositions_task<<<mesh.pointCount()>>>(mesh, xfo);
    mesh.incrementPointPositionsVersion();
  }
  
  // normals.
  Xfo xfn = Xfo(xfo.ori, Vec3(0, 0, 0), xfo.sc);
  if (xfn != Xfo())
  {
    // get polygon node normals as a flat array.
    Float32 flatNormals[];
    flatNormals.resize(3 * mesh.polygonPointsCount());
    Float32 extFlatNormals<>(flatNormals); 
    mesh.getNormalsAsExternalArray(extFlatNormals);
    
    // transform.
    Boolean repairNormals = (xfn.sc != Vec3(1.0, 1.0, 1.0));
    PolygonMeshModifyTransformNormals_task<<<mesh.polygonPointsCount()>>>(flatNormals, xfn, repairNormals);
    
    // set normals from flat array.
    mesh.setNormalsFromExternalArray(flatNormals);
    
    // increment version.
    mesh.incrementNormalsVersion();
  }
}

"
                    }
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1228.42236328125,\"y\":177.3586578369141}"
                    },
                  "name" : "Xfo_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "ori"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "tr"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "sc"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Xfo.Xfo",
                  "presetGUID" : "A0F6CD63A2069530481F214C62A069AA"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":867.51318359375,\"y\":208.0593872070312}"
                    },
                  "name" : "Add_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "lhs"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "rhs"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Core.Math.Add",
                  "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1110.724731445312,\"y\":180.5353088378906}"
                    },
                  "name" : "Vec3_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Vec3.Vec3",
                  "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":2079.227294921875,\"y\":107.8024978637695}"
                    },
                  "name" : "applyTransform_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "mesh"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "xfo"
                      }
                    ],
                  "definition" : {
                    "objectType" : "Func",
                    "title" : "applyTransform",
                    "ports" : [
                      {
                        "objectType" : "Port",
                        "nodePortType" : "IO",
                        "name" : "mesh",
                        "execPortType" : "IO",
                        "typeSpec" : "PolygonMesh"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "xfo",
                        "execPortType" : "In",
                        "typeSpec" : "Xfo"
                        }
                      ],
                    "extDeps" : {},
                    "code" : "require Geometry;

operator PolygonMeshModifyTransformPositions_task<<<index>>>(io PolygonMesh mesh, Xfo xfo)
{
  mesh.setPointPosition(index, xfo.transformVector(mesh.getPointPosition(index)));
}

operator PolygonMeshModifyTransformNormals_task<<<index>>>(io Float32 flatNormals[], Xfo xfo, Boolean repairLengths)
{
  UInt32 i = index * 3;

  // transform.
  Vec3 n(flatNormals[i + 0],
         flatNormals[i + 1],
         flatNormals[i + 2]);
  n = xfo.transformVector(n);
    
  // repair lengths.
  if (repairLengths)
  {
    Float32 len = n.lengthSquared();
    if (len > 1.0e-17)
    {
      n /= sqrt(len);
    }
    else
    {
      n.x = 0;
      n.y = 1;
      n.z = 0;
    }
  }
  
  // put back.
  flatNormals[i + 0] = n.x;
  flatNormals[i + 1] = n.y;
  flatNormals[i + 2] = n.z;
}

dfgEntry
{
  // positions.
  if (xfo != Xfo())
  {
    // transform and increment version.
    PolygonMeshModifyTransformPositions_task<<<mesh.pointCount()>>>(mesh, xfo);
    mesh.incrementPointPositionsVersion();
  }
  
  // normals.
  Xfo xfn = Xfo(xfo.ori, Vec3(0, 0, 0), xfo.sc);
  if (xfn != Xfo())
  {
    // get polygon node normals as a flat array.
    Float32 flatNormals[];
    flatNormals.resize(3 * mesh.polygonPointsCount());
    Float32 extFlatNormals<>(flatNormals); 
    mesh.getNormalsAsExternalArray(extFlatNormals);
    
    // transform.
    Boolean repairNormals = (xfn.sc != Vec3(1.0, 1.0, 1.0));
    PolygonMeshModifyTransformNormals_task<<<mesh.polygonPointsCount()>>>(flatNormals, xfn, repairNormals);
    
    // set normals from flat array.
    mesh.setNormalsFromExternalArray(flatNormals);
    
    // increment version.
    mesh.incrementNormalsVersion();
  }
}

"
                    }
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1914.291748046875,\"y\":58.46541595458984}"
                    },
                  "name" : "ClonePolygonMesh",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "value"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Geometry.PolygonMesh.ClonePolygonMesh",
                  "presetGUID" : "8480EBBD95E54A412E1471D01B474BA2"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1957.105590820312,\"y\":141.8094024658203}"
                    },
                  "name" : "Xfo_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "ori"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "tr"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "sc"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Xfo.Xfo",
                  "presetGUID" : "A0F6CD63A2069530481F214C62A069AA"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1831.632080078125,\"y\":140.2211456298828}"
                    },
                  "name" : "SetFromEuler_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "e"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Quat.SetFromEuler",
                  "presetGUID" : "FCDF5BF056AE4ED6E25A3268BAC86C77"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1731.56982421875,\"y\":135.4563598632812}"
                    },
                  "name" : "Euler_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "order"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Euler.Euler",
                  "presetGUID" : "4C1B6C23651EE376EAC335567AF0ADF2"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":2402.16259765625,\"y\":-155.5098114013672}"
                    },
                  "name" : "MergeMesh_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "this"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "source"
                      }
                    ],
                  "executable" : "Fabric.Exts.Geometry.PolygonMesh.MergeMesh",
                  "presetGUID" : "A68C3C98E78BEA71DDD7A2DB92CD5CBE"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1586.052490234375,\"y\":135.4819641113281}"
                    },
                  "name" : "Math_degToRad_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 180
                        },
                      "name" : "val"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Func.Math_degToRad",
                  "presetGUID" : "6BC97C4D61BFC82DBF0660BAD1104520"
                  },
                {
                  "objectType" : "User",
                  "metadata" : {
                    "uiTitle" : "mesh translate z",
                    "uiGraphPos" : "{\"x\":826.9244384765625,\"y\":130.8829803466797}",
                    "uiGraphSize" : "{\"w\":546.5718383789062,\"h\":207.6735534667969}"
                    },
                  "name" : "backDrop",
                  "ports" : []
                  },
                {
                  "objectType" : "User",
                  "metadata" : {
                    "uiTitle" : "rotate the mesh 180",
                    "uiGraphPos" : "{\"x\":1552.57080078125,\"y\":10.21962356567383}",
                    "uiGraphSize" : "{\"w\":725.9804077148438,\"h\":291.7608337402344}"
                    },
                  "name" : "backDrop_4",
                  "ports" : []
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":997.092529296875,\"y\":181.6382446289062}"
                    },
                  "name" : "If_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "cond"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "if_true"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "if_false"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Core.Control.If",
                  "presetGUID" : "3182A478A21643455D549E483D35F831"
                  }
                ],
              "connections" : {
                "profile" : [
                  "addExtrusionWithUV.profile"
                  ],
                "radius" : [
                  "Sub_1.lhs"
                  ],
                "radiusOffset" : [
                  "Sub_1.rhs"
                  ],
                "numSegments" : [
                  "addRadialXfos.num"
                  ],
                "smoothinAngle" : [
                  "Math_degToRad_1.val"
                  ],
                "profileTransZ" : [
                  "Add_1.lhs"
                  ],
                "profileTransZOffset" : [
                  "Add_1.rhs",
                  "If_1.if_false"
                  ],
                "scaleUV" : [
                  "addExtrusionWithUV.scaleUV"
                  ],
                "scaleU" : [
                  "addExtrusionWithUV.scaleU"
                  ],
                "scaleV" : [
                  "addExtrusionWithUV.scaleV"
                  ],
                "offsetU" : [
                  "addExtrusionWithUV.offsetU"
                  ],
                "offsetV" : [
                  "addExtrusionWithUV.offsetV"
                  ],
                "useProfileOffet" : [
                  "If_1.cond"
                  ],
                "addRadialXfos.xfos" : [
                  "xfos",
                  "addExtrusionWithUV.xfos"
                  ],
                "EmptyPolygonMesh_1.mesh" : [
                  "addExtrusionWithUV.this"
                  ],
                "addExtrusionWithUV.this" : [
                  "applyTransform.mesh"
                  ],
                "RecomputePointNormals_1.this" : [
                  "this"
                  ],
                "Math_degToRad_1.result" : [
                  "RecomputePointNormals_1.hardAngleRadians"
                  ],
                "Sub_1.result" : [
                  "addRadialXfos.radius"
                  ],
                "applyTransform.mesh" : [
                  "MergeMesh_1.this",
                  "ClonePolygonMesh.value"
                  ],
                "Xfo_1.result" : [
                  "applyTransform.xfo"
                  ],
                "Add_1.result" : [
                  "If_1.if_true"
                  ],
                "Vec3_1.result" : [
                  "Xfo_1.tr"
                  ],
                "applyTransform_2.mesh" : [
                  "MergeMesh_1.source"
                  ],
                "ClonePolygonMesh.result" : [
                  "applyTransform_2.mesh"
                  ],
                "Xfo_2.result" : [
                  "applyTransform_2.xfo"
                  ],
                "SetFromEuler_1.result" : [
                  "Xfo_2.ori"
                  ],
                "Euler_1.result" : [
                  "SetFromEuler_1.e"
                  ],
                "MergeMesh_1.this" : [
                  "RecomputePointNormals_1.this"
                  ],
                "Math_degToRad_2.result" : [
                  "Euler_1.x"
                  ],
                "If_1.result" : [
                  "Vec3_1.z"
                  ]
                }
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":203.7150268554688,\"y\":-451.5069274902344}"
              },
            "name" : "addChamfer_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "inPos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "size"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "maxAngle"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "outPos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "active"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "addChamfer",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "inPos",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "size",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "maxAngle",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "outPos",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "active",
                  "execPortType" : "In",
                  "typeSpec" : "Boolean"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {

  if (!active){
    outPos.resize(inPos.size());
    outPos = inPos;
    return;
  }
  
  Size numOutPos = (inPos.size()-2) * 2 + 2;
  Float32 maxAngRad = Math_degToRad(maxAngle);
  Vec3 temp[];
  Vec3 v1, v2;
  Float32 theta;

  for (Size i = 0; i < inPos.size(); i++){
    
    if (i == 0){
      temp.push(inPos[0]);
    }
    else if (i == inPos.size()-1){
      temp.push(inPos[inPos.size()-1]);
    }
    else {
      v1 = inPos[i-1] - inPos[i];
      v2 = inPos[i+1] - inPos[i];
      
      if (v1 != Vec3(0,0,0)){
        v1.normalize();
      }
      if (v2 != Vec3(0,0,0)){
        v2.normalize();
      }

      theta = acos(v1.dot(v2));
      
      if (theta <= maxAngRad){                
        Float32 hyp = (size*.5) / sin(theta*.5);
        temp.push(inPos[i] + v1 * hyp);
        temp.push(inPos[i] + v2 * hyp);
      }
      else{
        temp.push(inPos[i]);
      }
    }
  }
  outPos.resize(temp.size());
  outPos = temp;
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-293.7477416992188,\"y\":-361.796142578125}"
              },
            "name" : "getCapProfile_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "profile"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "getCapProfile",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "profile",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  
  Vec3 temp[];
  temp.push(Vec3(0,0,0));
  temp.push(Vec3(0,0,3));
  temp.push(Vec3(0,3,3));
  temp.push(Vec3(0,6,0));

  profile.resize(temp.size());
  profile = temp;
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":18.93386840820312,\"y\":-447.9230651855469}"
              },
            "name" : "Get_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "index"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "element"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "Get[]",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "array",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[][]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "index",
                  "execPortType" : "In",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "element",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  }
                ],
              "extDeps" : {},
              "origPresetGUID" : "880D755392299678EEB93260424986E2",
              "code" : "
dfgEntry {
	element = array[index];
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-127.379997253418,\"y\":-356.2731018066406}"
              },
            "name" : "Push_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "element"
                }
              ],
            "executable" : "Fabric.Core.Array.Push",
            "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":364.6614074707031,\"y\":-439.1768798828125}"
              },
            "name" : "transformProfile_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "inProfile"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scale"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "translateZ"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "outProfile"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "transformProfile",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "inProfile",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "scale",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "translateZ",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "outProfile",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  Size num = inProfile.size();
  outProfile.resize(num);
  
  Vec3 v = Vec3(0,0,translateZ);
  for (Size i = 0; i < num; i++){
    outProfile[i] = inProfile[i] * scale + v;
  }
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-130.0172119140625,\"y\":-446.6940612792969}"
              },
            "name" : "Push_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "element"
                }
              ],
            "executable" : "Fabric.Core.Array.Push",
            "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-272.7237854003906,\"y\":-473.6201477050781}"
              },
            "name" : "Resize_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "count"
                }
              ],
            "executable" : "Fabric.Core.Array.Resize",
            "presetGUID" : "73292917610FDC85B6E59510604F2467"
            }
          ],
        "connections" : {
          "capRadius" : [
            "createCapMesh.radius"
            ],
          "capRadiusOffset" : [
            "createCapMesh.radiusOffset"
            ],
          "capSegments" : [
            "createCapMesh.numSegments"
            ],
          "CapSmoothinAngle" : [
            "createCapMesh.smoothinAngle"
            ],
          "sideProfileTransZ" : [
            "createCapMesh.profileTransZ"
            ],
          "capZoffset" : [
            "createCapMesh.profileTransZOffset"
            ],
          "capProfileScale" : [
            "transformProfile_3.scale"
            ],
          "capChamferSize" : [
            "addChamfer_2.size"
            ],
          "capChamferMaxAngle" : [
            "addChamfer_2.maxAngle"
            ],
          "capUseChamfer" : [
            "addChamfer_2.active"
            ],
          "capType" : [
            "Get_1.index"
            ],
          "capProfile" : [
            "Resize_1.array"
            ],
          "capProfileCount" : [
            "Resize_1.count"
            ],
          "capScaleUV" : [
            "createCapMesh.scaleUV"
            ],
          "capScaleU" : [
            "createCapMesh.scaleU"
            ],
          "capScaleV" : [
            "createCapMesh.scaleV"
            ],
          "capOffsetU" : [
            "createCapMesh.offsetU"
            ],
          "capOffsetV" : [
            "createCapMesh.offsetV"
            ],
          "useProfileOffet" : [
            "createCapMesh.useProfileOffet"
            ],
          "createCapMesh.xfos" : [
            "xfos"
            ],
          "createCapMesh.this" : [
            "mesh"
            ],
          "addChamfer_2.outPos" : [
            "transformProfile_3.inProfile"
            ],
          "getCapProfile_3.profile" : [
            "Push_1.element"
            ],
          "Get_1.element" : [
            "addChamfer_2.inPos"
            ],
          "Push_1.array" : [
            "Get_1.array"
            ],
          "transformProfile_3.outProfile" : [
            "createCapMesh.profile"
            ],
          "Push_3.array" : [
            "Push_1.array"
            ],
          "Resize_1.array" : [
            "Push_3.element"
            ]
          }
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiComment" : "cap 2",
        "uiGraphPos" : "{\"x\":701.7379760742188,\"y\":-418.0924987792969}",
        "uiCommentExpanded" : "true"
        },
      "name" : "createCap_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capRadius"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capRadiusOffset"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capSegments"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "CapSmoothinAngle"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "sideProfileTransZ"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capZoffset"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capProfileScale"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capChamferSize"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capChamferMaxAngle"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capUseChamfer"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capType"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capProfile"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capProfileCount"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capScaleUV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capScaleU"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capScaleV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capOffsetU"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "capOffsetV"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "xfos"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "useProfileOffet"
          }
        ],
      "definition" : {
        "objectType" : "Graph",
        "metadata" : {
          "uiGraphZoom" : "{\n  \"value\" : 0.4322856068611145\n  }",
          "uiGraphPan" : "{\n  \"x\" : 181.5829131506653,\n  \"y\" : 504.1815594615282\n  }"
          },
        "title" : "createCap",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "mesh",
            "execPortType" : "Out"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capRadius",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capRadiusOffset",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capSegments",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "CapSmoothinAngle",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "sideProfileTransZ",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capZoffset",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capProfileScale",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capChamferSize",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capChamferMaxAngle",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capUseChamfer",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capType",
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capProfile",
            "execPortType" : "In",
            "typeSpec" : "Vec3[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capProfileCount",
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capScaleUV",
            "execPortType" : "In"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 1
              },
            "name" : "capScaleU",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Float32" : 1
              },
            "name" : "capScaleV",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capOffsetU",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "capOffsetV",
            "execPortType" : "In",
            "typeSpec" : "Float32"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "In",
            "name" : "xfos",
            "execPortType" : "Out",
            "typeSpec" : "Xfo[]"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "useProfileOffet",
            "execPortType" : "In",
            "typeSpec" : "Boolean"
            }
          ],
        "extDeps" : {},
        "nodes" : [
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":563.6953735351562,\"y\":-438.3607788085938}"
              },
            "name" : "createCapMesh",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "xfos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "this"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "profile"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "radius"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "radiusOffset"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "numSegments"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 20
                  },
                "name" : "smoothinAngle"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "profileTransZ"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "profileTransZOffset"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleUV"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleU"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scaleV"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "offsetU"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "offsetV"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "useProfileOffet"
                }
              ],
            "definition" : {
              "objectType" : "Graph",
              "metadata" : {
                "uiGraphZoom" : "{\n  \"value\" : 0.5672940015792847\n  }",
                "uiGraphPan" : "{\n  \"x\" : -333.64453125,\n  \"y\" : 189.9575958251953\n  }"
                },
              "title" : "createCapMesh",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "xfos",
                  "execPortType" : "Out",
                  "typeSpec" : "Xfo[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "this",
                  "execPortType" : "Out",
                  "typeSpec" : "PolygonMesh"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "profile",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "radius",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiRange" : "(0, 10)"
                    },
                  "nodePortType" : "Out",
                  "name" : "radiusOffset",
                  "execPortType" : "In"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "numSegments",
                  "execPortType" : "In",
                  "typeSpec" : "Integer"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiRange" : "(0, 180)"
                    },
                  "nodePortType" : "Out",
                  "name" : "smoothinAngle",
                  "execPortType" : "In",
                  "typeSpec" : "Scalar"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "profileTransZ",
                  "execPortType" : "In"
                  },
                {
                  "objectType" : "Port",
                  "metadata" : {
                    "uiRange" : "(0, 10)"
                    },
                  "nodePortType" : "Out",
                  "name" : "profileTransZOffset",
                  "execPortType" : "In"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "scaleUV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "defaultValues" : {
                    "Float32" : 1
                    },
                  "name" : "scaleU",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "defaultValues" : {
                    "Float32" : 1
                    },
                  "name" : "scaleV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "offsetU",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "offsetV",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "useProfileOffet",
                  "execPortType" : "In"
                  }
                ],
              "extDeps" : {},
              "nodes" : [
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":713.6862182617188,\"y\":-196.6073455810547}"
                    },
                  "name" : "addRadialXfos",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "num"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "radius"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Boolean" : true
                        },
                      "name" : "close"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "xfos"
                      }
                    ],
                  "definition" : {
                    "objectType" : "Func",
                    "title" : "addRadialXfos",
                    "ports" : [
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "num",
                        "execPortType" : "In",
                        "typeSpec" : "Integer"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "radius",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "close",
                        "execPortType" : "In",
                        "typeSpec" : "Boolean"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "In",
                        "name" : "xfos",
                        "execPortType" : "Out",
                        "typeSpec" : "Xfo[]"
                        }
                      ],
                    "extDeps" : {},
                    "code" : "dfgEntry {

  close? xfos.resize(num+1) : xfos.resize(num);
  
  Xfo xfo();
  Float32 inc = PI*2 / num;
  for (Size i = 0; i < num; i++){
    xfo.tr = Vec3(cos(inc*i)*radius, sin(inc*i)*radius, 0);
    xfo.ori.setFromEuler(Vec3(0,0,inc*i+PI*.5));
    xfos[i] = xfo;
  }

  if (close) {
    xfos[xfos.size()-1] = xfos[0];
  }
}
"
                    }
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":993.9868774414062,\"y\":-188.8872375488281}"
                    },
                  "name" : "EmptyPolygonMesh_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "mesh"
                      }
                    ],
                  "executable" : "Fabric.Exts.Geometry.PolygonMesh.EmptyPolygonMesh",
                  "presetGUID" : "EE0894325519F66F17D265A042545FEB"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1174.113525390625,\"y\":-145.0049591064453}"
                    },
                  "name" : "addExtrusionWithUV",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "this"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "profile"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "xfos"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "scaleU"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 1
                        },
                      "name" : "scaleV"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "offsetU"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "offsetV"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "scaleUV"
                      }
                    ],
                  "definition" : {
                    "objectType" : "Func",
                    "metadata" : {
                      "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                      "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
                      },
                    "title" : "extrude",
                    "ports" : [
                      {
                        "objectType" : "Port",
                        "nodePortType" : "IO",
                        "name" : "this",
                        "execPortType" : "IO",
                        "typeSpec" : "PolygonMesh"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "profile",
                        "execPortType" : "In",
                        "typeSpec" : "Vec3[]"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "xfos",
                        "execPortType" : "In",
                        "typeSpec" : "Xfo[]"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "scaleU",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "scaleV",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "offsetU",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "offsetV",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "scaleUV",
                        "execPortType" : "In",
                        "typeSpec" : "Float32"
                        }
                      ],
                    "extDeps" : {},
                    "code" : "dfgEntry {

  if(profile.size() < 2)
    return;
  if(xfos.size() < 2)
    return;

  Float32 uSpacing[];
  uSpacing.resize(profile.size());
    
  // todo: do not need the first u value to be 0
  for(Size i=0; i<profile.size(); i++) {
    if (i == 0){
      uSpacing[0] = 0;
    }
    else {
      uSpacing[i] = uSpacing[i-1] + (profile[i-1] - profile[i]).length();
    }
  }
  
  
  Float32 vSpacing[];
  vSpacing.resize(xfos.size());
  // todo: do not need the first v value to be 0
  for(Size i=0;i<xfos.size();i++) {
    if (i == 0){
      vSpacing[0] = 0;
    }
    else{
      vSpacing[i] = vSpacing[i-1] + (xfos[i].tr - xfos[i-1].tr).length();
    }
  }
  
  Size nbSegments = profile.size() - 1;
  
  // todo: fix here?
  Size nbPointRows = xfos.size();
  Size nbQuadRows = nbPointRows - 1;
  
  Size nbPoints = profile.size() * nbPointRows;
  Size firstPoint = this.createPoints(nbPoints);
  
  for(Size i=0;i<nbPoints;i++) {
    Size row = i / profile.size();
    Size pointIndex = i % profile.size();
    Vec3 pos = xfos[row].transformVector(profile[pointIndex]);
    this.setPointPosition(firstPoint+i, pos);
  }

  Ref<Vec2Attribute> uvs = null;
  uvs = this.getOrCreateVec2Attribute(\"uvs0\");
    
    
  this.beginStructureChanges();

  Size nbQuads = nbSegments * nbQuadRows;
  Size v0, v1, v2, v3;
  Float32 uStart, uEnd, vStart, vEnd;
  Float32 maxV = vSpacing[vSpacing.size()-1] * scaleUV * scaleV;
  
  for(Size i=0;i<nbQuads;i++) {

    Size segmentIndex = i % nbSegments;
    Size row = i / nbSegments;

    if (row == 0){
      vStart = maxV - offsetV;
      vEnd = maxV - (vSpacing[1] * scaleUV * scaleV + offsetV);
    }
    else{
      vStart = maxV - (vSpacing[row] * scaleUV * scaleV + offsetV);
      vEnd = maxV - (vSpacing[row+1] * scaleUV * scaleV + offsetV);
    }

    uStart = uSpacing[segmentIndex] * scaleUV * scaleU + offsetU;
    uEnd = uSpacing[segmentIndex+1] * scaleUV * scaleU + offsetU;
        
    if(segmentIndex == profile.size() - 1) {
      v0 = (profile.size() * row + segmentIndex) % nbPoints;
      v1 = (profile.size() * row) % nbPoints;
      v2 = (profile.size() * (row+1)) % nbPoints;
      v3 = (profile.size() * (row+1) + segmentIndex) % nbPoints;
    } else {
      v0 = (profile.size() * row + segmentIndex) % nbPoints;
      v1 = (profile.size() * row + segmentIndex + 1) % nbPoints;
      v2 = (profile.size() * (row+1) + segmentIndex + 1) % nbPoints;
      v3 = (profile.size() * (row+1) + segmentIndex) % nbPoints;
    }
    
    this.addPolygon(firstPoint+v3, firstPoint+v2, firstPoint+v1, firstPoint+v0);

    this.setPolygonAttribute(i, 0, uvs, Vec2(uStart, vEnd));
    this.setPolygonAttribute(i, 1, uvs, Vec2(uEnd, vEnd));
    this.setPolygonAttribute(i, 2, uvs, Vec2(uEnd, vStart));
    this.setPolygonAttribute(i, 3, uvs, Vec2(uStart, vStart));
  }

  this.endStructureChanges();
}




"
                    }
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":2553.064208984375,\"y\":-198.4133148193359}"
                    },
                  "name" : "RecomputePointNormals_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "this"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "hardAngleRadians"
                      }
                    ],
                  "executable" : "Fabric.Exts.Geometry.PolygonMesh.RecomputePointNormals",
                  "presetGUID" : "82B0904C5BAB58BDA9ED038FB18E0629"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":2393.921142578125,\"y\":-232.3416290283203}"
                    },
                  "name" : "Math_degToRad_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "val"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Func.Math_degToRad",
                  "presetGUID" : "6BC97C4D61BFC82DBF0660BAD1104520"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":581.5926513671875,\"y\":-184.8209228515625}"
                    },
                  "name" : "Sub_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "lhs"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "rhs"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Core.Math.Sub",
                  "presetGUID" : "F9754B19F43BC017056B8BA291E7B8B4"
                  },
                {
                  "objectType" : "User",
                  "metadata" : {
                    "uiTitle" : "create xfos",
                    "uiGraphPos" : "{\"x\":546.750732421875,\"y\":-236.3871307373047}",
                    "uiNodeColor" : "{\n  \"r\" : 183,\n  \"g\" : 110,\n  \"b\" : 43\n  }",
                    "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                    "uiGraphSize" : "{\"w\":390.9342346191406,\"h\":180.0375671386719}"
                    },
                  "name" : "backDrop_2",
                  "ports" : []
                  },
                {
                  "objectType" : "User",
                  "metadata" : {
                    "uiTitle" : "create mesh extrusion",
                    "uiGraphPos" : "{\"x\":968.212890625,\"y\":-232.7274475097656}",
                    "uiNodeColor" : "{\n  \"r\" : 60,\n  \"g\" : 47,\n  \"b\" : 159\n  }",
                    "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                    "uiGraphSize" : "{\"w\":392.3278503417969,\"h\":309.6498413085938}"
                    },
                  "name" : "backDrop_3",
                  "ports" : []
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1527.822143554688,\"y\":-145.8751373291016}"
                    },
                  "name" : "applyTransform",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "mesh"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "xfo"
                      }
                    ],
                  "definition" : {
                    "objectType" : "Func",
                    "title" : "applyTransform",
                    "ports" : [
                      {
                        "objectType" : "Port",
                        "nodePortType" : "IO",
                        "name" : "mesh",
                        "execPortType" : "IO",
                        "typeSpec" : "PolygonMesh"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "xfo",
                        "execPortType" : "In",
                        "typeSpec" : "Xfo"
                        }
                      ],
                    "extDeps" : {},
                    "code" : "require Geometry;

operator PolygonMeshModifyTransformPositions_task<<<index>>>(io PolygonMesh mesh, Xfo xfo)
{
  mesh.setPointPosition(index, xfo.transformVector(mesh.getPointPosition(index)));
}

operator PolygonMeshModifyTransformNormals_task<<<index>>>(io Float32 flatNormals[], Xfo xfo, Boolean repairLengths)
{
  UInt32 i = index * 3;

  // transform.
  Vec3 n(flatNormals[i + 0],
         flatNormals[i + 1],
         flatNormals[i + 2]);
  n = xfo.transformVector(n);
    
  // repair lengths.
  if (repairLengths)
  {
    Float32 len = n.lengthSquared();
    if (len > 1.0e-17)
    {
      n /= sqrt(len);
    }
    else
    {
      n.x = 0;
      n.y = 1;
      n.z = 0;
    }
  }
  
  // put back.
  flatNormals[i + 0] = n.x;
  flatNormals[i + 1] = n.y;
  flatNormals[i + 2] = n.z;
}

dfgEntry
{
  // positions.
  if (xfo != Xfo())
  {
    // transform and increment version.
    PolygonMeshModifyTransformPositions_task<<<mesh.pointCount()>>>(mesh, xfo);
    mesh.incrementPointPositionsVersion();
  }
  
  // normals.
  Xfo xfn = Xfo(xfo.ori, Vec3(0, 0, 0), xfo.sc);
  if (xfn != Xfo())
  {
    // get polygon node normals as a flat array.
    Float32 flatNormals[];
    flatNormals.resize(3 * mesh.polygonPointsCount());
    Float32 extFlatNormals<>(flatNormals); 
    mesh.getNormalsAsExternalArray(extFlatNormals);
    
    // transform.
    Boolean repairNormals = (xfn.sc != Vec3(1.0, 1.0, 1.0));
    PolygonMeshModifyTransformNormals_task<<<mesh.polygonPointsCount()>>>(flatNormals, xfn, repairNormals);
    
    // set normals from flat array.
    mesh.setNormalsFromExternalArray(flatNormals);
    
    // increment version.
    mesh.incrementNormalsVersion();
  }
}

"
                    }
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1228.42236328125,\"y\":177.3586578369141}"
                    },
                  "name" : "Xfo_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "ori"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "tr"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "sc"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Xfo.Xfo",
                  "presetGUID" : "A0F6CD63A2069530481F214C62A069AA"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":867.51318359375,\"y\":208.0593872070312}"
                    },
                  "name" : "Add_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "lhs"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "rhs"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Core.Math.Add",
                  "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1110.724731445312,\"y\":180.5353088378906}"
                    },
                  "name" : "Vec3_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Vec3.Vec3",
                  "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":2079.227294921875,\"y\":107.8024978637695}"
                    },
                  "name" : "applyTransform_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "mesh"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "xfo"
                      }
                    ],
                  "definition" : {
                    "objectType" : "Func",
                    "title" : "applyTransform",
                    "ports" : [
                      {
                        "objectType" : "Port",
                        "nodePortType" : "IO",
                        "name" : "mesh",
                        "execPortType" : "IO",
                        "typeSpec" : "PolygonMesh"
                        },
                      {
                        "objectType" : "Port",
                        "nodePortType" : "Out",
                        "name" : "xfo",
                        "execPortType" : "In",
                        "typeSpec" : "Xfo"
                        }
                      ],
                    "extDeps" : {},
                    "code" : "require Geometry;

operator PolygonMeshModifyTransformPositions_task<<<index>>>(io PolygonMesh mesh, Xfo xfo)
{
  mesh.setPointPosition(index, xfo.transformVector(mesh.getPointPosition(index)));
}

operator PolygonMeshModifyTransformNormals_task<<<index>>>(io Float32 flatNormals[], Xfo xfo, Boolean repairLengths)
{
  UInt32 i = index * 3;

  // transform.
  Vec3 n(flatNormals[i + 0],
         flatNormals[i + 1],
         flatNormals[i + 2]);
  n = xfo.transformVector(n);
    
  // repair lengths.
  if (repairLengths)
  {
    Float32 len = n.lengthSquared();
    if (len > 1.0e-17)
    {
      n /= sqrt(len);
    }
    else
    {
      n.x = 0;
      n.y = 1;
      n.z = 0;
    }
  }
  
  // put back.
  flatNormals[i + 0] = n.x;
  flatNormals[i + 1] = n.y;
  flatNormals[i + 2] = n.z;
}

dfgEntry
{
  // positions.
  if (xfo != Xfo())
  {
    // transform and increment version.
    PolygonMeshModifyTransformPositions_task<<<mesh.pointCount()>>>(mesh, xfo);
    mesh.incrementPointPositionsVersion();
  }
  
  // normals.
  Xfo xfn = Xfo(xfo.ori, Vec3(0, 0, 0), xfo.sc);
  if (xfn != Xfo())
  {
    // get polygon node normals as a flat array.
    Float32 flatNormals[];
    flatNormals.resize(3 * mesh.polygonPointsCount());
    Float32 extFlatNormals<>(flatNormals); 
    mesh.getNormalsAsExternalArray(extFlatNormals);
    
    // transform.
    Boolean repairNormals = (xfn.sc != Vec3(1.0, 1.0, 1.0));
    PolygonMeshModifyTransformNormals_task<<<mesh.polygonPointsCount()>>>(flatNormals, xfn, repairNormals);
    
    // set normals from flat array.
    mesh.setNormalsFromExternalArray(flatNormals);
    
    // increment version.
    mesh.incrementNormalsVersion();
  }
}

"
                    }
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1914.291748046875,\"y\":58.46541595458984}"
                    },
                  "name" : "ClonePolygonMesh",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "value"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Geometry.PolygonMesh.ClonePolygonMesh",
                  "presetGUID" : "8480EBBD95E54A412E1471D01B474BA2"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1957.105590820312,\"y\":141.8094024658203}"
                    },
                  "name" : "Xfo_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "ori"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "tr"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "sc"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Xfo.Xfo",
                  "presetGUID" : "A0F6CD63A2069530481F214C62A069AA"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1831.632080078125,\"y\":140.2211456298828}"
                    },
                  "name" : "SetFromEuler_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "e"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Quat.SetFromEuler",
                  "presetGUID" : "FCDF5BF056AE4ED6E25A3268BAC86C77"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1731.56982421875,\"y\":135.4563598632812}"
                    },
                  "name" : "Euler_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "x"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "y"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "z"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "order"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Euler.Euler",
                  "presetGUID" : "4C1B6C23651EE376EAC335567AF0ADF2"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":2402.16259765625,\"y\":-155.5098114013672}"
                    },
                  "name" : "MergeMesh_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "IO",
                      "name" : "this"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "source"
                      }
                    ],
                  "executable" : "Fabric.Exts.Geometry.PolygonMesh.MergeMesh",
                  "presetGUID" : "A68C3C98E78BEA71DDD7A2DB92CD5CBE"
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":1586.052490234375,\"y\":135.4819641113281}"
                    },
                  "name" : "Math_degToRad_2",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "defaultValues" : {
                        "Float32" : 180
                        },
                      "name" : "val"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Exts.Math.Func.Math_degToRad",
                  "presetGUID" : "6BC97C4D61BFC82DBF0660BAD1104520"
                  },
                {
                  "objectType" : "User",
                  "metadata" : {
                    "uiTitle" : "mesh translate z",
                    "uiGraphPos" : "{\"x\":826.9244384765625,\"y\":130.8829803466797}",
                    "uiGraphSize" : "{\"w\":546.5718383789062,\"h\":207.6735534667969}"
                    },
                  "name" : "backDrop",
                  "ports" : []
                  },
                {
                  "objectType" : "User",
                  "metadata" : {
                    "uiTitle" : "rotate the mesh 180",
                    "uiGraphPos" : "{\"x\":1552.57080078125,\"y\":10.21962356567383}",
                    "uiGraphSize" : "{\"w\":725.9804077148438,\"h\":291.7608337402344}"
                    },
                  "name" : "backDrop_4",
                  "ports" : []
                  },
                {
                  "objectType" : "Inst",
                  "metadata" : {
                    "uiGraphPos" : "{\"x\":997.092529296875,\"y\":181.6382446289062}"
                    },
                  "name" : "If_1",
                  "ports" : [
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "cond"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "if_true"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "In",
                      "name" : "if_false"
                      },
                    {
                      "objectType" : "InstPort",
                      "nodePortType" : "Out",
                      "name" : "result"
                      }
                    ],
                  "executable" : "Fabric.Core.Control.If",
                  "presetGUID" : "3182A478A21643455D549E483D35F831"
                  }
                ],
              "connections" : {
                "profile" : [
                  "addExtrusionWithUV.profile"
                  ],
                "radius" : [
                  "Sub_1.lhs"
                  ],
                "radiusOffset" : [
                  "Sub_1.rhs"
                  ],
                "numSegments" : [
                  "addRadialXfos.num"
                  ],
                "smoothinAngle" : [
                  "Math_degToRad_1.val"
                  ],
                "profileTransZ" : [
                  "Add_1.lhs"
                  ],
                "profileTransZOffset" : [
                  "Add_1.rhs",
                  "If_1.if_false"
                  ],
                "scaleUV" : [
                  "addExtrusionWithUV.scaleUV"
                  ],
                "scaleU" : [
                  "addExtrusionWithUV.scaleU"
                  ],
                "scaleV" : [
                  "addExtrusionWithUV.scaleV"
                  ],
                "offsetU" : [
                  "addExtrusionWithUV.offsetU"
                  ],
                "offsetV" : [
                  "addExtrusionWithUV.offsetV"
                  ],
                "useProfileOffet" : [
                  "If_1.cond"
                  ],
                "addRadialXfos.xfos" : [
                  "xfos",
                  "addExtrusionWithUV.xfos"
                  ],
                "EmptyPolygonMesh_1.mesh" : [
                  "addExtrusionWithUV.this"
                  ],
                "addExtrusionWithUV.this" : [
                  "applyTransform.mesh"
                  ],
                "RecomputePointNormals_1.this" : [
                  "this"
                  ],
                "Math_degToRad_1.result" : [
                  "RecomputePointNormals_1.hardAngleRadians"
                  ],
                "Sub_1.result" : [
                  "addRadialXfos.radius"
                  ],
                "applyTransform.mesh" : [
                  "MergeMesh_1.this",
                  "ClonePolygonMesh.value"
                  ],
                "Xfo_1.result" : [
                  "applyTransform.xfo"
                  ],
                "Add_1.result" : [
                  "If_1.if_true"
                  ],
                "Vec3_1.result" : [
                  "Xfo_1.tr"
                  ],
                "applyTransform_2.mesh" : [
                  "MergeMesh_1.source"
                  ],
                "ClonePolygonMesh.result" : [
                  "applyTransform_2.mesh"
                  ],
                "Xfo_2.result" : [
                  "applyTransform_2.xfo"
                  ],
                "SetFromEuler_1.result" : [
                  "Xfo_2.ori"
                  ],
                "Euler_1.result" : [
                  "SetFromEuler_1.e"
                  ],
                "MergeMesh_1.this" : [
                  "RecomputePointNormals_1.this"
                  ],
                "Math_degToRad_2.result" : [
                  "Euler_1.x"
                  ],
                "If_1.result" : [
                  "Vec3_1.z"
                  ]
                }
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":203.7150268554688,\"y\":-451.5069274902344}"
              },
            "name" : "addChamfer_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "inPos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "size"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "maxAngle"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "outPos"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "active"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "addChamfer",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "inPos",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "size",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "maxAngle",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "outPos",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "active",
                  "execPortType" : "In",
                  "typeSpec" : "Boolean"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {

  if (!active){
    outPos.resize(inPos.size());
    outPos = inPos;
    return;
  }
  
  Size numOutPos = (inPos.size()-2) * 2 + 2;
  Float32 maxAngRad = Math_degToRad(maxAngle);
  Vec3 temp[];
  Vec3 v1, v2;
  Float32 theta;

  for (Size i = 0; i < inPos.size(); i++){
    
    if (i == 0){
      temp.push(inPos[0]);
    }
    else if (i == inPos.size()-1){
      temp.push(inPos[inPos.size()-1]);
    }
    else {
      v1 = inPos[i-1] - inPos[i];
      v2 = inPos[i+1] - inPos[i];
      
      if (v1 != Vec3(0,0,0)){
        v1.normalize();
      }
      if (v2 != Vec3(0,0,0)){
        v2.normalize();
      }

      theta = acos(v1.dot(v2));
      
      if (theta <= maxAngRad){                
        Float32 hyp = (size*.5) / sin(theta*.5);
        temp.push(inPos[i] + v1 * hyp);
        temp.push(inPos[i] + v2 * hyp);
      }
      else{
        temp.push(inPos[i]);
      }
    }
  }
  outPos.resize(temp.size());
  outPos = temp;
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-293.7477416992188,\"y\":-361.796142578125}"
              },
            "name" : "getCapProfile_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "profile"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "getCapProfile",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "profile",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  
  Vec3 temp[];
  temp.push(Vec3(0,0,0));
  temp.push(Vec3(0,0,3));
  temp.push(Vec3(0,3,3));
  temp.push(Vec3(0,6,0));

  profile.resize(temp.size());
  profile = temp;
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":18.93386840820312,\"y\":-447.9230651855469}"
              },
            "name" : "Get_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "index"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "element"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "Get[]",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "array",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[][]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "index",
                  "execPortType" : "In",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "element",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  }
                ],
              "extDeps" : {},
              "origPresetGUID" : "880D755392299678EEB93260424986E2",
              "code" : "
dfgEntry {
	element = array[index];
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-127.379997253418,\"y\":-356.2731018066406}"
              },
            "name" : "Push_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "element"
                }
              ],
            "executable" : "Fabric.Core.Array.Push",
            "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":364.6614074707031,\"y\":-439.1768798828125}"
              },
            "name" : "transformProfile_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "inProfile"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "scale"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "translateZ"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "Out",
                "name" : "outProfile"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "transformProfile",
              "ports" : [
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "inProfile",
                  "execPortType" : "In",
                  "typeSpec" : "Vec3[]"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "scale",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "Out",
                  "name" : "translateZ",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "Port",
                  "nodePortType" : "In",
                  "name" : "outProfile",
                  "execPortType" : "Out",
                  "typeSpec" : "Vec3[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry {
  Size num = inProfile.size();
  outProfile.resize(num);
  
  Vec3 v = Vec3(0,0,translateZ);
  for (Size i = 0; i < num; i++){
    outProfile[i] = inProfile[i] * scale + v;
  }
}
"
              }
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-130.0172119140625,\"y\":-446.6940612792969}"
              },
            "name" : "Push_3",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "element"
                }
              ],
            "executable" : "Fabric.Core.Array.Push",
            "presetGUID" : "572880BF96ACC34D6987BE3333715F52"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-272.7237854003906,\"y\":-473.6201477050781}"
              },
            "name" : "Resize_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "nodePortType" : "IO",
                "name" : "array"
                },
              {
                "objectType" : "InstPort",
                "nodePortType" : "In",
                "name" : "count"
                }
              ],
            "executable" : "Fabric.Core.Array.Resize",
            "presetGUID" : "73292917610FDC85B6E59510604F2467"
            }
          ],
        "connections" : {
          "capRadius" : [
            "createCapMesh.radius"
            ],
          "capRadiusOffset" : [
            "createCapMesh.radiusOffset"
            ],
          "capSegments" : [
            "createCapMesh.numSegments"
            ],
          "CapSmoothinAngle" : [
            "createCapMesh.smoothinAngle"
            ],
          "sideProfileTransZ" : [
            "createCapMesh.profileTransZ"
            ],
          "capZoffset" : [
            "createCapMesh.profileTransZOffset"
            ],
          "capProfileScale" : [
            "transformProfile_3.scale"
            ],
          "capChamferSize" : [
            "addChamfer_2.size"
            ],
          "capChamferMaxAngle" : [
            "addChamfer_2.maxAngle"
            ],
          "capUseChamfer" : [
            "addChamfer_2.active"
            ],
          "capType" : [
            "Get_1.index"
            ],
          "capProfile" : [
            "Resize_1.array"
            ],
          "capProfileCount" : [
            "Resize_1.count"
            ],
          "capScaleUV" : [
            "createCapMesh.scaleUV"
            ],
          "capScaleU" : [
            "createCapMesh.scaleU"
            ],
          "capScaleV" : [
            "createCapMesh.scaleV"
            ],
          "capOffsetU" : [
            "createCapMesh.offsetU"
            ],
          "capOffsetV" : [
            "createCapMesh.offsetV"
            ],
          "useProfileOffet" : [
            "createCapMesh.useProfileOffet"
            ],
          "createCapMesh.xfos" : [
            "xfos"
            ],
          "createCapMesh.this" : [
            "mesh"
            ],
          "addChamfer_2.outPos" : [
            "transformProfile_3.inProfile"
            ],
          "getCapProfile_3.profile" : [
            "Push_1.element"
            ],
          "Get_1.element" : [
            "addChamfer_2.inPos"
            ],
          "Push_1.array" : [
            "Get_1.array"
            ],
          "transformProfile_3.outProfile" : [
            "createCapMesh.profile"
            ],
          "Push_3.array" : [
            "Push_1.array"
            ],
          "Resize_1.array" : [
            "Push_3.element"
            ]
          }
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2283.380859375,\"y\":-503.2623901367188}"
        },
      "name" : "And_3",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "lhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Logic.And",
      "presetGUID" : "5C4DF279926CC4AFD90CCD43A2E07655"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2205.655029296875,\"y\":-304.1365661621094}"
        },
      "name" : "And_4",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "lhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Logic.And",
      "presetGUID" : "5C4DF279926CC4AFD90CCD43A2E07655"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2170.899169921875,\"y\":417.5947875976562}"
        },
      "name" : "And_5",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "lhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Logic.And",
      "presetGUID" : "5C4DF279926CC4AFD90CCD43A2E07655"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":2096.91162109375,\"y\":710.5391845703125}"
        },
      "name" : "And_6",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "lhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "rhs"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "Out",
          "name" : "result"
          }
        ],
      "executable" : "Fabric.Core.Logic.And",
      "presetGUID" : "5C4DF279926CC4AFD90CCD43A2E07655"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1492.155029296875,\"y\":-492.552978515625}"
        },
      "name" : "applyTransform_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "xfo"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "title" : "applyTransform",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "IO",
            "name" : "mesh",
            "execPortType" : "IO",
            "typeSpec" : "PolygonMesh"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "xfo",
            "execPortType" : "In",
            "typeSpec" : "Xfo"
            }
          ],
        "extDeps" : {},
        "code" : "require Geometry;

operator PolygonMeshModifyTransformPositions_task<<<index>>>(io PolygonMesh mesh, Xfo xfo)
{
  mesh.setPointPosition(index, xfo.transformVector(mesh.getPointPosition(index)));
}

operator PolygonMeshModifyTransformNormals_task<<<index>>>(io Float32 flatNormals[], Xfo xfo, Boolean repairLengths)
{
  UInt32 i = index * 3;

  // transform.
  Vec3 n(flatNormals[i + 0],
         flatNormals[i + 1],
         flatNormals[i + 2]);
  n = xfo.transformVector(n);
    
  // repair lengths.
  if (repairLengths)
  {
    Float32 len = n.lengthSquared();
    if (len > 1.0e-17)
    {
      n /= sqrt(len);
    }
    else
    {
      n.x = 0;
      n.y = 1;
      n.z = 0;
    }
  }
  
  // put back.
  flatNormals[i + 0] = n.x;
  flatNormals[i + 1] = n.y;
  flatNormals[i + 2] = n.z;
}

dfgEntry
{
  // positions.
  if (xfo != Xfo())
  {
    // transform and increment version.
    PolygonMeshModifyTransformPositions_task<<<mesh.pointCount()>>>(mesh, xfo);
    mesh.incrementPointPositionsVersion();
  }
  
  // normals.
  Xfo xfn = Xfo(xfo.ori, Vec3(0, 0, 0), xfo.sc);
  if (xfn != Xfo())
  {
    // get polygon node normals as a flat array.
    Float32 flatNormals[];
    flatNormals.resize(3 * mesh.polygonPointsCount());
    Float32 extFlatNormals<>(flatNormals); 
    mesh.getNormalsAsExternalArray(extFlatNormals);
    
    // transform.
    Boolean repairNormals = (xfn.sc != Vec3(1.0, 1.0, 1.0));
    PolygonMeshModifyTransformNormals_task<<<mesh.polygonPointsCount()>>>(flatNormals, xfn, repairNormals);
    
    // set normals from flat array.
    mesh.setNormalsFromExternalArray(flatNormals);
    
    // increment version.
    mesh.incrementNormalsVersion();
  }
}

"
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1157.405029296875,\"y\":297.4176635742188}"
        },
      "name" : "SetFromMat44_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "this"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "m"
          }
        ],
      "executable" : "Fabric.Exts.Math.Xfo.SetFromMat44",
      "presetGUID" : "59B1B738E9402F3006B2516B14A43848"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1612.869995117188,\"y\":596.5687866210938}"
        },
      "name" : "Cache_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "value"
          }
        ],
      "executable" : "Fabric.Core.Data.Cache",
      "presetGUID" : "D903AFD981FE9214C69943F542D5FD60"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":1435.282836914062,\"y\":595.2901000976562}"
        },
      "name" : "applyTransform_3",
      "ports" : [
        {
          "objectType" : "InstPort",
          "nodePortType" : "IO",
          "name" : "mesh"
          },
        {
          "objectType" : "InstPort",
          "nodePortType" : "In",
          "name" : "xfo"
          }
        ],
      "definition" : {
        "objectType" : "Func",
        "title" : "applyTransform",
        "ports" : [
          {
            "objectType" : "Port",
            "nodePortType" : "IO",
            "name" : "mesh",
            "execPortType" : "IO",
            "typeSpec" : "PolygonMesh"
            },
          {
            "objectType" : "Port",
            "nodePortType" : "Out",
            "name" : "xfo",
            "execPortType" : "In",
            "typeSpec" : "Xfo"
            }
          ],
        "extDeps" : {},
        "code" : "require Geometry;

operator PolygonMeshModifyTransformPositions_task<<<index>>>(io PolygonMesh mesh, Xfo xfo)
{
  mesh.setPointPosition(index, xfo.transformVector(mesh.getPointPosition(index)));
}

operator PolygonMeshModifyTransformNormals_task<<<index>>>(io Float32 flatNormals[], Xfo xfo, Boolean repairLengths)
{
  UInt32 i = index * 3;

  // transform.
  Vec3 n(flatNormals[i + 0],
         flatNormals[i + 1],
         flatNormals[i + 2]);
  n = xfo.transformVector(n);
    
  // repair lengths.
  if (repairLengths)
  {
    Float32 len = n.lengthSquared();
    if (len > 1.0e-17)
    {
      n /= sqrt(len);
    }
    else
    {
      n.x = 0;
      n.y = 1;
      n.z = 0;
    }
  }
  
  // put back.
  flatNormals[i + 0] = n.x;
  flatNormals[i + 1] = n.y;
  flatNormals[i + 2] = n.z;
}

dfgEntry
{
  // positions.
  if (xfo != Xfo())
  {
    // transform and increment version.
    PolygonMeshModifyTransformPositions_task<<<mesh.pointCount()>>>(mesh, xfo);
    mesh.incrementPointPositionsVersion();
  }
  
  // normals.
  Xfo xfn = Xfo(xfo.ori, Vec3(0, 0, 0), xfo.sc);
  if (xfn != Xfo())
  {
    // get polygon node normals as a flat array.
    Float32 flatNormals[];
    flatNormals.resize(3 * mesh.polygonPointsCount());
    Float32 extFlatNormals<>(flatNormals); 
    mesh.getNormalsAsExternalArray(extFlatNormals);
    
    // transform.
    Boolean repairNormals = (xfn.sc != Vec3(1.0, 1.0, 1.0));
    PolygonMeshModifyTransformNormals_task<<<mesh.polygonPointsCount()>>>(flatNormals, xfn, repairNormals);
    
    // set normals from flat array.
    mesh.setNormalsFromExternalArray(flatNormals);
    
    // increment version.
    mesh.incrementNormalsVersion();
  }
}

"
        }
      }
    ],
  "connections" : {
    "p1Radius" : [
      "twoCircleTangent.p1Radius",
      "createCap.capRadius"
      ],
    "p2Radius" : [
      "twoCircleTangent.p2Radius",
      "createCap_2.capRadius"
      ],
    "p1Num" : [
      "twoCircleTangent.p1Num",
      "createCap.capSegments"
      ],
    "p2Num" : [
      "twoCircleTangent.p2Num",
      "createCap_2.capSegments"
      ],
    "distance" : [
      "twoCircleTangent.distance",
      "Vec3_1.x"
      ],
    "sideNum" : [
      "twoCircleTangent.sideNum"
      ],
    "sideProfileType" : [
      "extrudeProfiles.p1profileType"
      ],
    "sideProfile" : [
      "extrudeProfiles.profile"
      ],
    "sideProfileCount" : [
      "extrudeProfiles.profileCount"
      ],
    "sideSmoothingAngle" : [
      "extrudeProfiles.smoothingAngle"
      ],
    "sideProfileTransZ" : [
      "extrudeProfiles.profileTranslateZ",
      "createCap.sideProfileTransZ",
      "createCap_2.sideProfileTransZ"
      ],
    "sideProfileScale" : [
      "extrudeProfiles.profileScale"
      ],
    "sideScaleUV" : [
      "extrudeProfiles.scaleUV"
      ],
    "sideOffsetU" : [
      "extrudeProfiles.offsetU"
      ],
    "sideOffsetV" : [
      "extrudeProfiles.offsetV"
      ],
    "sideScaleU" : [
      "extrudeProfiles.scaleU"
      ],
    "sideScaleV" : [
      "extrudeProfiles.scaleV"
      ],
    "sideUseChamfer" : [
      "extrudeProfiles.useChamfer"
      ],
    "sideChamferMaxAngle" : [
      "extrudeProfiles.chamferMaxAngle"
      ],
    "sideChamferSize" : [
      "extrudeProfiles.chamferSize"
      ],
    "cap1RadiusOffset" : [
      "createCap.capRadiusOffset"
      ],
    "cap1Zoffset" : [
      "createCap.capZoffset"
      ],
    "cap1ProfileScale" : [
      "createCap.capProfileScale"
      ],
    "cap1UseChamfer" : [
      "createCap.capUseChamfer"
      ],
    "cap1ChamferMaxAngle" : [
      "createCap.capChamferMaxAngle"
      ],
    "cap1ChamferSize" : [
      "createCap.capChamferSize"
      ],
    "cap1ScaleUV" : [
      "createCap.capScaleUV"
      ],
    "Cap1SmoothinAngle" : [
      "createCap.CapSmoothinAngle"
      ],
    "cap2RadiusOffset" : [
      "createCap_2.capRadiusOffset"
      ],
    "cap2Zoffset" : [
      "createCap_2.capZoffset"
      ],
    "cap2ProfileScale" : [
      "createCap_2.capProfileScale"
      ],
    "cap2UseChamfer" : [
      "createCap_2.capUseChamfer"
      ],
    "cap2ChamferMaxAngle" : [
      "createCap_2.capChamferMaxAngle"
      ],
    "cap2ChamferSize" : [
      "createCap_2.capChamferSize"
      ],
    "cap2ScaleUV" : [
      "createCap_2.capScaleUV"
      ],
    "Cap2SmoothinAngle" : [
      "createCap_2.CapSmoothinAngle"
      ],
    "drawXfos" : [
      "SetActive_1.active"
      ],
    "doubleSided" : [
      "DrawTexturedPolygonMesh_1.doubleSided",
      "DrawMesh_1.doubleSided",
      "DrawTexturedPolygonMesh_2.doubleSided",
      "DrawMesh_2.doubleSided"
      ],
    "wireFrame" : [
      "DrawTexturedPolygonMesh_1.wireFrame",
      "DrawMesh_1.wireFrame",
      "DrawTexturedPolygonMesh_2.wireFrame",
      "DrawMesh_2.wireFrame"
      ],
    "drawCaps" : [
      "And_2.lhs",
      "And_1.lhs"
      ],
    "drawTexture" : [
      "Not_1.value",
      "Not_2.value",
      "And_1.rhs",
      "And_6.lhs"
      ],
    "cap1Type" : [
      "createCap.capType"
      ],
    "cap1Profile" : [
      "createCap.capProfile"
      ],
    "cap1ProfileCount" : [
      "createCap.capProfileCount"
      ],
    "cap1UseProfileOffet" : [
      "createCap.useProfileOffet"
      ],
    "cap2Type" : [
      "createCap_2.capType"
      ],
    "cap2Profile" : [
      "createCap_2.capProfile"
      ],
    "cap2ProfileCount" : [
      "createCap_2.capProfileCount"
      ],
    "cap2UseProfileOffet" : [
      "createCap_2.useProfileOffet"
      ],
    "drawMesh" : [
      "And_4.rhs",
      "And_3.rhs",
      "And_5.rhs",
      "And_6.rhs"
      ],
    "m" : [
      "SetFromMat44_1.m"
      ],
    "EmptyDrawingHandle_1.handle" : [
      "DrawAxesInstances_1.this",
      "DrawTexturedPolygonMesh_1.this",
      "DrawTexturedPolygonMesh_2.this"
      ],
    "twoCircleTangent.outXfos" : [
      "DrawAxesInstances_1.transforms",
      "extrudeProfiles.outXfos"
      ],
    "DrawAxesInstances_1.instance" : [
      "SetActive_1.this"
      ],
    "SetActive_1.this" : [
      "instance"
      ],
    "extrudeProfiles.value" : [
      "extrusionMesh",
      "applyTransform_3.mesh"
      ],
    "DrawTexturedPolygonMesh_1.instance" : [
      "SetActive_3.this"
      ],
    "DrawMesh_1.drawThis" : [
      "SetActive_2.this"
      ],
    "SetActive_2.this" : [
      "drawThis"
      ],
    "SetActive_3.this" : [
      "instance_4"
      ],
    "Not_1.result" : [
      "And_5.lhs"
      ],
    "DrawTexturedPolygonMesh_2.instance" : [
      "SetActive_6.this"
      ],
    "Xfo_1.result" : [
      "applyTransform.xfo"
      ],
    "Vec3_1.result" : [
      "Xfo_1.tr"
      ],
    "Cache.value" : [
      "DrawTexturedPolygonMesh_2.mesh",
      "centerRodMesh",
      "DrawMesh_2.mesh"
      ],
    "applyTransform.mesh" : [
      "MergeMesh_1.source"
      ],
    "MergeMesh_1.this" : [
      "applyTransform_2.mesh"
      ],
    "DrawMesh_2.drawThis" : [
      "SetActive_5.this"
      ],
    "SetActive_5.this" : [
      "this"
      ],
    "SetActive_6.this" : [
      "instance_2"
      ],
    "Not_2.result" : [
      "And_2.rhs"
      ],
    "And_1.result" : [
      "And_4.lhs"
      ],
    "And_2.result" : [
      "And_3.lhs"
      ],
    "createCap.mesh" : [
      "MergeMesh_1.this"
      ],
    "createCap_2.mesh" : [
      "applyTransform.mesh"
      ],
    "And_3.result" : [
      "SetActive_5.active"
      ],
    "And_4.result" : [
      "SetActive_6.active"
      ],
    "And_5.result" : [
      "SetActive_2.active"
      ],
    "And_6.result" : [
      "SetActive_3.active"
      ],
    "applyTransform_2.mesh" : [
      "Cache.value"
      ],
    "SetFromMat44_1.this" : [
      "applyTransform_2.xfo",
      "applyTransform_3.xfo"
      ],
    "Cache_2.value" : [
      "DrawMesh_1.mesh",
      "DrawTexturedPolygonMesh_1.mesh"
      ],
    "applyTransform_3.mesh" : [
      "Cache_2.value"
      ]
    },
  "requiredPresets" : {
    "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle" : {
      "objectType" : "Graph",
      "title" : "EmptyDrawingHandle",
      "cacheRule" : "never",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "handle",
          "execPortType" : "Out",
          "typeSpec" : "DrawingHandle"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 894, \"y\": 100}"
            },
          "name" : "Clear",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "this"
              }
            ],
          "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.Clear",
          "presetGUID" : "39E8D81FA7C7C4A825877F16EFE3564F",
          "cacheRule" : "never"
          },
        {
          "objectType" : "Var",
          "metadata" : {
            "uiGraphPos" : "{\"x\":567.0,\"y\":56.0}",
            "uiCollapsedState" : "0"
            },
          "name" : "handleVar",
          "ports" : [
            {
              "objectType" : "VarPort",
              "nodePortType" : "IO",
              "name" : "value"
              }
            ],
          "dataType" : "DrawingHandle",
          "extDep" : "InlineDrawing:*"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":287.0,\"y\":56.0}"
            },
          "name" : "CreateDrawingHandle",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "handle"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "title" : "Create DrawingHandle",
            "ports" : [
              {
                "objectType" : "Port",
                "nodePortType" : "In",
                "name" : "handle",
                "execPortType" : "Out",
                "typeSpec" : "DrawingHandle"
                }
              ],
            "extDeps" : {
              "InlineDrawing" : "*"
              },
            "code" : "dfgEntry {
  handle = DrawingHandle();
}
"
            }
          }
        ],
      "connections" : {
        "Clear.this" : [
          "handle"
          ],
        "handleVar.value" : [
          "Clear.this"
          ],
        "CreateDrawingHandle.handle" : [
          "handleVar.value"
          ]
        }
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.Clear" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
        "uiTooltip" : "removes all contents from the DrawingHandle\n\n Supported by DrawingHandle"
        },
      "title" : "Clear",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "DrawingHandle"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*"
        },
      "presetGUID" : "39E8D81FA7C7C4A825877F16EFE3564F",
      "code" : "require InlineDrawing;

dfgEntry {
  this.clear();
}
"
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.DrawAxesInstances" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
        "uiTooltip" : "helper function to draw axes at given transforms\n\n Supported by DrawingHandle"
        },
      "title" : "DrawAxesInstances",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "exec",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "DrawingHandle"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "name",
          "execPortType" : "In",
          "typeSpec" : "String"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "nodePortType" : "Out",
          "name" : "transforms",
          "execPortType" : "In",
          "typeSpec" : "Xfo[]"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "In",
          "name" : "dummyResult",
          "execPortType" : "Out",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "instance",
          "execPortType" : "Out",
          "typeSpec" : "InlineInstance"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*",
        "FabricInterfaces" : "*"
        },
      "presetGUID" : "A2DAC55CB1CE7426981A13F213257B7A",
      "code" : "require InlineDrawing;

dfgEntry {
  this.drawAxesInstances(name, transforms, dummyResult, instance);
}
"
      },
    "Fabric.Exts.InlineDrawing.Func.SetActive" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/InlineDrawing/InlineInstance.html",
        "uiTooltip" : "enables or disables this instance\n\n Supported by InlineInstance,DrawingHandle"
        },
      "title" : "SetActive",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "active",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*"
        },
      "presetGUID" : "63CF666747969EEF99B85F6A55F07D5F",
      "code" : "require InlineDrawing;

dfgEntry {
  this.setActive(active);
}
"
      },
    "Fabric.Exts.Geometry.PolygonMesh.EmptyPolygonMesh" : {
      "objectType" : "Graph",
      "title" : "EmptyPolygonMesh",
      "cacheRule" : "never",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "mesh",
          "execPortType" : "Out",
          "typeSpec" : "PolygonMesh"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "EE0894325519F66F17D265A042545FEB",
      "nodes" : [
        {
          "objectType" : "Inst",
          "name" : "PolygonMesh",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "debugName"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "float64Positions"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "executable" : "Fabric.Exts.Geometry.PolygonMesh.PolygonMesh",
          "presetGUID" : "18F3A38BE7497D6BFC18A148A520B66D"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 951, \"y\": 145}"
            },
          "name" : "Clear",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "this"
              }
            ],
          "executable" : "Fabric.Exts.Geometry.Func.Clear",
          "presetGUID" : "96D1EC86835296FFDC60533717804EE7",
          "cacheRule" : "never"
          },
        {
          "objectType" : "Var",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 744, \"y\": 122}"
            },
          "name" : "meshVar",
          "ports" : [
            {
              "objectType" : "VarPort",
              "nodePortType" : "IO",
              "name" : "value"
              }
            ],
          "dataType" : "PolygonMesh",
          "extDep" : "Geometry:*"
          }
        ],
      "connections" : {
        "PolygonMesh.result" : [
          "meshVar.value"
          ],
        "Clear.this" : [
          "mesh"
          ],
        "meshVar.value" : [
          "Clear.this"
          ]
        }
      },
    "Fabric.Exts.Geometry.PolygonMesh.PolygonMesh" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Geometry/PolygonMesh.html",
        "uiTooltip" : "Constructor.\n\n Supported by PolygonMesh"
        },
      "title" : "PolygonMesh",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "debugName",
          "execPortType" : "In",
          "typeSpec" : "String"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "float64Positions",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 51,\n  \"g\" : 1,\n  \"b\" : 106\n  }"
            },
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "PolygonMesh"
          }
        ],
      "extDeps" : {
        "Geometry" : "*"
        },
      "presetGUID" : "18F3A38BE7497D6BFC18A148A520B66D",
      "code" : "require Geometry;

dfgEntry {
  result = PolygonMesh(debugName, float64Positions);
}
"
      },
    "Fabric.Exts.Geometry.Func.Clear" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Geometry/GeometryAttributes.html",
        "uiTooltip" : "Removes all attributes, and resets attribute value array sizes to 0.\n\n Supported by GeometryAttributes,BaseGeometry,Points,Lines,PolygonMesh"
        },
      "title" : "Clear",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {
        "Geometry" : "*"
        },
      "presetGUID" : "96D1EC86835296FFDC60533717804EE7",
      "code" : "require Geometry;

dfgEntry {
  this.clear();
}
"
      },
    "Fabric.Exts.Geometry.PolygonMesh.RecomputePointNormals" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Geometry/PolygonMesh.html",
        "uiTooltip" : "Recomputes all point normals and introduces normal splits if adjacent polygons' normals differ by more than `hardAngleRadians` radians.\nAll previously stored point normals will be overwritten.\nThe computed normal value is the average of neighbor polygons' :kl-ref:`PolygonMesh.generatePolygonNormal` (or a subset of these if there is a split).\n\n Supported by PolygonMesh"
        },
      "title" : "RecomputePointNormals",
      "ports" : [
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 51,\n  \"g\" : 1,\n  \"b\" : 106\n  }"
            },
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "PolygonMesh"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "hardAngleRadians",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          }
        ],
      "extDeps" : {
        "Geometry" : "*"
        },
      "presetGUID" : "82B0904C5BAB58BDA9ED038FB18E0629",
      "code" : "require Geometry;

dfgEntry {
  this.recomputePointNormals(hardAngleRadians);
}
"
      },
    "Fabric.Exts.Math.Func.Math_degToRad" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiTooltip" : "Converts degrees to radians\n\n Supported by Scalar"
        },
      "title" : "Math_degToRad",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "val",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Scalar"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "6BC97C4D61BFC82DBF0660BAD1104520",
      "code" : "require Math;

dfgEntry {
  result = Math_degToRad(val);
}
"
      },
    "Fabric.Exts.Math.Vec3.Vec3" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Math/Vec3.html",
        "uiTooltip" : "Constructor from scalar components\n\n Supported by Vec3"
        },
      "title" : "Vec3",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "x",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "y",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "z",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Vec3"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "A59E49949F21CFCB14B5711D52330BA7",
      "code" : "require Math;

dfgEntry {
  result = Vec3(x, y, z);
}
"
      },
    "Fabric.Core.Array.Push" : {
      "objectType" : "Func",
      "title" : "Push[]",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "array",
          "execPortType" : "IO",
          "typeSpec" : "$TYPE$[]"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "element",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "572880BF96ACC34D6987BE3333715F52",
      "code" : "
dfgEntry {
	array.push(element);
}
"
      },
    "Fabric.Exts.Geometry.PolygonMesh.ClonePolygonMesh" : {
      "objectType" : "Graph",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 214,\n  \"g\" : 191,\n  \"b\" : 103\n  }",
        "uiHeaderColor" : "{\n  \"r\" : 188,\n  \"g\" : 129,\n  \"b\" : 83\n  }"
        },
      "title" : "ClonePolygonMesh",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "value",
          "execPortType" : "In"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "PolygonMesh"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "8480EBBD95E54A412E1471D01B474BA2",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 329, \"y\": 165}"
            },
          "name" : "PolygonMesh",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "debugName"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "float64Positions"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "Out",
              "name" : "result"
              }
            ],
          "executable" : "Fabric.Exts.Geometry.PolygonMesh.PolygonMesh",
          "presetGUID" : "18F3A38BE7497D6BFC18A148A520B66D"
          },
        {
          "objectType" : "Var",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 476, \"y\": 176}"
            },
          "name" : "mesh",
          "ports" : [
            {
              "objectType" : "VarPort",
              "nodePortType" : "IO",
              "name" : "value"
              }
            ],
          "dataType" : "PolygonMesh",
          "extDep" : "Geometry:*"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 674, \"y\": 115}"
            },
          "name" : "CloneMembersTo",
          "ports" : [
            {
              "objectType" : "InstPort",
              "nodePortType" : "In",
              "name" : "value"
              },
            {
              "objectType" : "InstPort",
              "nodePortType" : "IO",
              "name" : "clonedValue"
              }
            ],
          "executable" : "Fabric.Core.Data.CloneMembersTo",
          "presetGUID" : "5FCEF4F5EFB2D8F917E415A22FFCDF2C"
          }
        ],
      "connections" : {
        "value" : [
          "CloneMembersTo.value"
          ],
        "PolygonMesh.result" : [
          "mesh.value"
          ],
        "mesh.value" : [
          "CloneMembersTo.clonedValue"
          ],
        "CloneMembersTo.clonedValue" : [
          "result"
          ]
        }
      },
    "Fabric.Core.Data.CloneMembersTo" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 214,\n  \"g\" : 191,\n  \"b\" : 103\n  }",
        "uiHeaderColor" : "{\n  \"r\" : 188,\n  \"g\" : 129,\n  \"b\" : 83\n  }"
        },
      "title" : "CloneMembersTo",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "value",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "clonedValue",
          "execPortType" : "IO",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "5FCEF4F5EFB2D8F917E415A22FFCDF2C",
      "code" : "dfgEntry {
  value.cloneMembersTo(clonedValue);
}
"
      },
    "Fabric.Exts.Math.Xfo.Xfo" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Math/Xfo.html",
        "uiTooltip" : "Constructor from the orientation, translation and scaling\n\n Supported by Xfo"
        },
      "title" : "Xfo",
      "ports" : [
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 0,\n  \"g\" : 191,\n  \"b\" : 232\n  }"
            },
          "nodePortType" : "Out",
          "name" : "ori",
          "execPortType" : "In",
          "typeSpec" : "Quat"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "Out",
          "name" : "tr",
          "execPortType" : "In",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "Out",
          "defaultValues" : {
            "Vec3" : {
              "x" : 1,
              "y" : 1,
              "z" : 1
              }
            },
          "name" : "sc",
          "execPortType" : "In",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Xfo"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "A0F6CD63A2069530481F214C62A069AA",
      "code" : "require Math;

dfgEntry {
  result = Xfo(ori, tr, sc);
}
"
      },
    "Fabric.Exts.Math.Quat.SetFromEuler" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Math/Quat.html",
        "uiTooltip" : "Set this quat from a euler rotation\n\n Supported by Quat"
        },
      "title" : "SetFromEuler",
      "ports" : [
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 0,\n  \"g\" : 191,\n  \"b\" : 232\n  }"
            },
          "nodePortType" : "Out",
          "name" : "e",
          "execPortType" : "In",
          "typeSpec" : "Euler"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 0,\n  \"g\" : 191,\n  \"b\" : 232\n  }"
            },
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Quat"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "FCDF5BF056AE4ED6E25A3268BAC86C77",
      "code" : "require Math;

dfgEntry {
  result.setFromEuler(e);
}
"
      },
    "Fabric.Exts.Math.Euler.Euler" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Math/Euler.html",
        "uiTooltip" : "Constructor using three Scalars as angles in radians and a RotationOrder\n\n Supported by Euler"
        },
      "title" : "Euler",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "x",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "y",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "z",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 0,\n  \"g\" : 191,\n  \"b\" : 232\n  }"
            },
          "nodePortType" : "Out",
          "name" : "order",
          "execPortType" : "In",
          "typeSpec" : "RotationOrder"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 0,\n  \"g\" : 191,\n  \"b\" : 232\n  }"
            },
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Euler"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "4C1B6C23651EE376EAC335567AF0ADF2",
      "code" : "require Math;

dfgEntry {
  result = Euler(x, y, z, order);
}
"
      },
    "Fabric.Exts.Geometry.PolygonMesh.MergeMesh" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Geometry/PolygonMesh.html",
        "uiTooltip" : "Appends a mesh to this one, including its attributes.\n\nMerge a single mesh to this one.\n\n Supported by PolygonMesh"
        },
      "title" : "MergeMesh",
      "ports" : [
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 51,\n  \"g\" : 1,\n  \"b\" : 106\n  }"
            },
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "PolygonMesh"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 51,\n  \"g\" : 1,\n  \"b\" : 106\n  }"
            },
          "nodePortType" : "Out",
          "name" : "source",
          "execPortType" : "In",
          "typeSpec" : "PolygonMesh"
          }
        ],
      "extDeps" : {
        "Geometry" : "*"
        },
      "presetGUID" : "A68C3C98E78BEA71DDD7A2DB92CD5CBE",
      "code" : "require Geometry;

dfgEntry {
  Ref<PolygonMesh> source_ref = source;
  this.mergeMesh(source_ref);
}
"
      },
    "Fabric.Core.Array.Resize" : {
      "objectType" : "Func",
      "title" : "Resize[]",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "array",
          "execPortType" : "IO",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "count",
          "execPortType" : "In",
          "typeSpec" : "UInt32"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "73292917610FDC85B6E59510604F2467",
      "code" : "
dfgEntry {
	array.resize(count);
}
"
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.DrawTexturedPolygonMesh" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
        "uiTooltip" : "helper function to draw a mesh given a color + a single transform\n\n Supported by DrawingHandle"
        },
      "title" : "DrawTexturedPolygonMesh",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "exec",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "DrawingHandle"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "name",
          "execPortType" : "In",
          "typeSpec" : "String"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "filePath",
          "execPortType" : "In",
          "typeSpec" : "String"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 0,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color" : {
              "r" : 0.2000000029802322,
              "g" : 0.2000000029802322,
              "b" : 0.2000000029802322,
              "a" : 1
              }
            },
          "name" : "specular",
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 16
            },
          "name" : "specFactor",
          "execPortType" : "In",
          "typeSpec" : "Float32"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 0,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "Out",
          "name" : "ambient",
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "nodePortType" : "Out",
          "name" : "transform",
          "execPortType" : "In",
          "typeSpec" : "Xfo"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 51,\n  \"g\" : 1,\n  \"b\" : 106\n  }"
            },
          "nodePortType" : "Out",
          "name" : "mesh",
          "execPortType" : "In",
          "typeSpec" : "PolygonMesh"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "wireFrame",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "doubleSided",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "In",
          "name" : "dummyResult",
          "execPortType" : "Out",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "instance",
          "execPortType" : "Out",
          "typeSpec" : "InlineInstance"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*",
        "FabricInterfaces" : "*"
        },
      "presetGUID" : "2422BED0AFC9A66EFC9086103DB69004",
      "code" : "require InlineDrawing;

dfgEntry {
  this.drawTexturedPolygonMesh(name, filePath, specular, specFactor, ambient, transform, mesh, wireFrame, doubleSided, dummyResult, instance);
}
"
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.DrawPolygonMesh" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
        "uiTooltip" : "helper function to draw a mesh given a color + a single transform\n\n Supported by DrawingHandle"
        },
      "title" : "DrawPolygonMesh",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "exec",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "DrawingHandle"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "name",
          "execPortType" : "In",
          "typeSpec" : "String"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 0,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color" : {
              "r" : 0,
              "g" : 1,
              "b" : 0,
              "a" : 1
              }
            },
          "name" : "color",
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 0,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color" : {
              "r" : 0.2000000029802322,
              "g" : 0.2000000029802322,
              "b" : 0.2000000029802322,
              "a" : 1
              }
            },
          "name" : "specular",
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 16
            },
          "name" : "specFactor",
          "execPortType" : "In",
          "typeSpec" : "Float32"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "nodePortType" : "Out",
          "name" : "transform",
          "execPortType" : "In",
          "typeSpec" : "Xfo"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 51,\n  \"g\" : 1,\n  \"b\" : 106\n  }"
            },
          "nodePortType" : "Out",
          "name" : "mesh",
          "execPortType" : "In",
          "typeSpec" : "PolygonMesh"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "wireFrame",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "doubleSided",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "nodePortType" : "In",
          "name" : "dummyResult",
          "execPortType" : "Out",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "instance",
          "execPortType" : "Out",
          "typeSpec" : "InlineInstance"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*",
        "FabricInterfaces" : "*"
        },
      "presetGUID" : "88D132945A91B3FEB731B90CE41878AF",
      "code" : "require InlineDrawing;

dfgEntry {
  this.drawPolygonMesh(name, color, specular, specFactor, transform, mesh, wireFrame, doubleSided, dummyResult, instance);
}
"
      },
    "Fabric.Core.Logic.Not" : {
      "objectType" : "Func",
      "title" : "Not !",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "value",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Boolean"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "B8FE3CDCF84BBE1B3A07C80E724FB147",
      "code" : "
dfgEntry {
	result = !value;
}
"
      },
    "Fabric.Core.Data.Cache" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 214,\n  \"g\" : 191,\n  \"b\" : 103\n  }",
        "uiAlwaysShowDaisyChainPorts" : "true",
        "uiHeaderColor" : "{\n  \"r\" : 188,\n  \"g\" : 129,\n  \"b\" : 83\n  }"
        },
      "title" : "Cache",
      "cacheRule" : "always",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "value",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "D903AFD981FE9214C69943F542D5FD60",
      "code" : "dfgEntry {
}
"
      },
    "Fabric.Core.Logic.And" : {
      "objectType" : "Func",
      "title" : "And &&",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "lhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "rhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "Boolean"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "5C4DF279926CC4AFD90CCD43A2E07655",
      "code" : "
dfgEntry {
	result = lhs && rhs;
}
"
      },
    "Fabric.Core.Math.Sub" : {
      "objectType" : "Func",
      "title" : "Sub",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "lhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "rhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "F9754B19F43BC017056B8BA291E7B8B4",
      "code" : "
dfgEntry {
	result = lhs - rhs;
}
"
      },
    "Fabric.Core.Math.Add" : {
      "objectType" : "Func",
      "title" : "Add",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "lhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "rhs",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7",
      "code" : "
dfgEntry {
	result = lhs + rhs;
}
"
      },
    "Fabric.Core.Control.If" : {
      "objectType" : "Func",
      "title" : "If",
      "ports" : [
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "cond",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "if_true",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "Out",
          "name" : "if_false",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "Port",
          "nodePortType" : "In",
          "name" : "result",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "3182A478A21643455D549E483D35F831",
      "code" : "
dfgEntry {
	result = cond ? if_true : if_false;
}
"
      },
    "Fabric.Exts.Math.Xfo.SetFromMat44" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.0.1/HTML/KLExtensionsGuide/Math/Xfo.html",
        "uiTooltip" : "Sets this transform from a given Mat44\n\n Supported by Xfo"
        },
      "title" : "SetFromMat44",
      "ports" : [
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "nodePortType" : "IO",
          "name" : "this",
          "execPortType" : "IO",
          "typeSpec" : "Xfo"
          },
        {
          "objectType" : "Port",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "nodePortType" : "Out",
          "name" : "m",
          "execPortType" : "In",
          "typeSpec" : "Mat44"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "59B1B738E9402F3006B2516B14A43848",
      "code" : "require Math;

dfgEntry {
  this.setFromMat44(m);
}
"
      }
    },
  "args" : [
    {
      "type" : "InlineInstance",
      "value" : null,
      "ext" : "InlineDrawing"
      },
    {
      "type" : "PolygonMesh",
      "value" : null,
      "ext" : "Geometry"
      },
    {
      "type" : "DrawingHandle",
      "value" : null,
      "ext" : "InlineDrawing"
      },
    {
      "type" : "PolygonMesh",
      "value" : null,
      "ext" : "Geometry"
      },
    {
      "type" : "InlineInstance",
      "value" : null,
      "ext" : "InlineDrawing"
      },
    {
      "type" : "InlineInstance",
      "value" : null,
      "ext" : "InlineDrawing"
      },
    {
      "type" : "DrawingHandle",
      "value" : null,
      "ext" : "InlineDrawing"
      },
    {
      "type" : "Boolean",
      "value" : null
      },
    {
      "type" : "Float32",
      "value" : 2.920000076293945
      },
    {
      "type" : "Float32",
      "value" : 2.65500020980835
      },
    {
      "type" : "SInt32",
      "value" : 38
      },
    {
      "type" : "SInt32",
      "value" : 45
      },
    {
      "type" : "Float32",
      "value" : 4.949999809265137
      },
    {
      "type" : "SInt32",
      "value" : 10
      },
    {
      "type" : "SInt32",
      "value" : 1
      },
    {
      "type" : "Vec3[]",
      "value" : null,
      "ext" : "Math"
      },
    {
      "type" : "UInt32",
      "value" : 1
      },
    {
      "type" : "Float32",
      "value" : 22.0319995880127
      },
    {
      "type" : "Float32",
      "value" : 0
      },
    {
      "type" : "Float32",
      "value" : 0.3625999987125397
      },
    {
      "type" : "Float32",
      "value" : 0.300000011920929
      },
    {
      "type" : "Float32",
      "value" : 0
      },
    {
      "type" : "Float32",
      "value" : 0
      },
    {
      "type" : "Float32",
      "value" : 0.9987999796867371
      },
    {
      "type" : "Float32",
      "value" : 0.9876000285148621
      },
    {
      "type" : "Boolean",
      "value" : true
      },
    {
      "type" : "Float32",
      "value" : 180
      },
    {
      "type" : "Float32",
      "value" : 0.1770000010728836
      },
    {
      "type" : "Float32",
      "value" : 0.6190000176429749
      },
    {
      "type" : "Float32",
      "value" : 0
      },
    {
      "type" : "Float32",
      "value" : 0.08129999786615372
      },
    {
      "type" : "Boolean",
      "value" : true
      },
    {
      "type" : "Float32",
      "value" : 180
      },
    {
      "type" : "Float32",
      "value" : 1
      },
    {
      "type" : "Float32",
      "value" : 0.2000000029802322
      },
    {
      "type" : "Float32",
      "value" : 21.56400108337402
      },
    {
      "type" : "Float32",
      "value" : 0.4620000123977661
      },
    {
      "type" : "Float32",
      "value" : 0
      },
    {
      "type" : "Float32",
      "value" : 0.07959999889135361
      },
    {
      "type" : "Boolean",
      "value" : true
      },
    {
      "type" : "Float32",
      "value" : 180
      },
    {
      "type" : "Float32",
      "value" : 0.9735000133514404
      },
    {
      "type" : "Float32",
      "value" : 0.2075999975204468
      },
    {
      "type" : "Float32",
      "value" : 20.48399925231934
      },
    {
      "type" : "Boolean",
      "value" : false
      },
    {
      "type" : "Boolean",
      "value" : true
      },
    {
      "type" : "Boolean",
      "value" : false
      },
    {
      "type" : "Boolean",
      "value" : true
      },
    {
      "type" : "Boolean",
      "value" : false
      },
    {
      "type" : "UInt32",
      "value" : 1
      },
    {
      "type" : "Vec3[]",
      "value" : null,
      "ext" : "Math"
      },
    {
      "type" : "UInt32",
      "value" : null
      },
    {
      "type" : "Boolean",
      "value" : false
      },
    {
      "type" : "UInt32",
      "value" : 1
      },
    {
      "type" : "Vec3[]",
      "value" : null,
      "ext" : "Math"
      },
    {
      "type" : "UInt32",
      "value" : null
      },
    {
      "type" : "Boolean",
      "value" : false
      },
    {
      "type" : "Boolean",
      "value" : true
      },
    {
      "type" : "Mat44",
      "value" : null,
      "ext" : "Math"
      }
    ]
  }